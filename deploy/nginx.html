<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx | Vya 会发现更大的世界</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="Just Build My FE Knowledge">
    
    <link rel="preload" href="/assets/css/0.styles.f8aec87b.css" as="style"><link rel="preload" href="/assets/js/app.14fed451.js" as="script"><link rel="preload" href="/assets/js/3.2ffe6a61.js" as="script"><link rel="preload" href="/assets/js/14.12737e40.js" as="script"><link rel="prefetch" href="/assets/js/10.d9b6e650.js"><link rel="prefetch" href="/assets/js/11.ac42daec.js"><link rel="prefetch" href="/assets/js/12.2b0177f7.js"><link rel="prefetch" href="/assets/js/13.145ba638.js"><link rel="prefetch" href="/assets/js/15.33c0b1d7.js"><link rel="prefetch" href="/assets/js/16.a15bbf49.js"><link rel="prefetch" href="/assets/js/17.5bf75498.js"><link rel="prefetch" href="/assets/js/18.2f547adf.js"><link rel="prefetch" href="/assets/js/19.2629ddcb.js"><link rel="prefetch" href="/assets/js/2.e5ceb2e1.js"><link rel="prefetch" href="/assets/js/20.9b9f6cb3.js"><link rel="prefetch" href="/assets/js/21.e107ea19.js"><link rel="prefetch" href="/assets/js/22.2ff89e72.js"><link rel="prefetch" href="/assets/js/23.3f103057.js"><link rel="prefetch" href="/assets/js/24.4ab677a7.js"><link rel="prefetch" href="/assets/js/25.20d28a22.js"><link rel="prefetch" href="/assets/js/26.c84f4985.js"><link rel="prefetch" href="/assets/js/27.6334fa8b.js"><link rel="prefetch" href="/assets/js/28.860d8d6a.js"><link rel="prefetch" href="/assets/js/29.b8513dfd.js"><link rel="prefetch" href="/assets/js/30.82170bb3.js"><link rel="prefetch" href="/assets/js/31.a7a489fc.js"><link rel="prefetch" href="/assets/js/32.b2f8a124.js"><link rel="prefetch" href="/assets/js/33.a7900303.js"><link rel="prefetch" href="/assets/js/4.f9737640.js"><link rel="prefetch" href="/assets/js/5.348a6229.js"><link rel="prefetch" href="/assets/js/6.e37969a6.js"><link rel="prefetch" href="/assets/js/7.0feeecca.js"><link rel="prefetch" href="/assets/js/8.7072f3eb.js"><link rel="prefetch" href="/assets/js/9.4c20ff33.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f8aec87b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="Vya 会发现更大的世界" class="logo"> <span class="site-name can-hide">Vya 会发现更大的世界</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/RVya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️ Star Me
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/RVya" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️ Star Me
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/source.html" class="sidebar-link">Source</a></li><li><a href="/optimization.html" class="sidebar-link">Optimization</a></li><li><a href="/browser.html" class="sidebar-link">Browser</a></li><li><a href="/html.html" class="sidebar-link">HTML</a></li><li><a href="/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/css.html" class="sidebar-link">CSS</a></li><li><a href="/function.html" class="sidebar-link">Function</a></li><li><a href="/object.html" class="sidebar-link">Object</a></li><li><a href="/design-patterns.html" class="sidebar-link">Design patterns</a></li><li><a href="/algorithm.html" class="sidebar-link">Algorithm</a></li><li><a href="/interview.html" class="sidebar-link">Interview</a></li><li><a href="/source.html" class="sidebar-link">Source</a></li><li><a href="/node.html" class="sidebar-link">Node</a></li><li><a href="/nginx.html" aria-current="page" class="active sidebar-link">Nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nginx.html#一-安装" class="sidebar-link">一. 安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nginx.html#_1-安装编译工具及库文件" class="sidebar-link">1. 安装编译工具及库文件</a></li><li class="sidebar-sub-header"><a href="/nginx.html#_2-首先要安装-pcre-作用是让-nginx-支持-rewrite-功能。" class="sidebar-link">2. 首先要安装 PCRE 作用是让 Nginx 支持 Rewrite 功能。</a></li><li class="sidebar-sub-header"><a href="/nginx.html#_3-安装-nginx" class="sidebar-link">3. 安装 Nginx</a></li></ul></li><li class="sidebar-sub-header"><a href="/nginx.html#_2-配置" class="sidebar-link">2. 配置</a></li><li class="sidebar-sub-header"><a href="/nginx.html#_3-使用" class="sidebar-link">3. 使用</a></li><li class="sidebar-sub-header"><a href="/nginx.html#yum" class="sidebar-link">Yum</a></li><li class="sidebar-sub-header"><a href="/nginx.html#error" class="sidebar-link">Error</a></li></ul></li><li><a href="/common-sense.html" class="sidebar-link">Language</a></li><li><a href="/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/about-me.html" class="sidebar-link">蜜汁彩蛋</a></li><li><a href="/" aria-current="page" class="sidebar-link">🎉 Hey Come On</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx">Nginx</h1> <p><img src="data:image/png;base64,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" alt="1"></p> <hr> <h2 id="一-安装">一. 安装</h2> <h3 id="_1-安装编译工具及库文件">1. 安装编译工具及库文件</h3> <p><code>yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel pcre pcre-devel</code></p> <h3 id="_2-首先要安装-pcre-作用是让-nginx-支持-rewrite-功能。">2. <code>首先要安装 PCRE 作用是让 Nginx 支持 Rewrite 功能。</code></h3> <ul><li>2-1. 下载 PCRE 安装包</li></ul> <p><code>wget http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</code></p> <ul><li>2-2. 解压安装包:</li></ul> <p><code>[root@bogon src]# tar zxvf pcre-8.35.tar.gz</code></p> <ul><li>2-3. 进入安装包目录</li></ul> <p><code>[root@bogon src]# cd pcre-8.35</code></p> <ul><li>2-4. 编译安装</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@bogon pcre-8.35<span class="token punctuation">]</span><span class="token comment"># ./configure</span>
<span class="token punctuation">[</span>root@bogon pcre-8.35<span class="token punctuation">]</span><span class="token comment"># make &amp;&amp; make install</span>
</code></pre></div><ul><li>2-5. 查看 pcre 版本</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@bogon pcre-8.35<span class="token punctuation">]</span><span class="token comment"># pcre-config --version</span>
</code></pre></div><h3 id="_3-安装-nginx">3. 安装 Nginx</h3> <ul><li>3-1 下载 Nginx</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@bogon src<span class="token punctuation">]</span><span class="token comment"># wget http://nginx.org/download/nginx-1.6.2.tar.gz</span>
</code></pre></div><ul><li>3-2 解压安装包</li></ul> <p><code>[root@bogon src]# tar zxvf nginx-1.6.2.tar.gz</code></p> <ul><li>3-3 进入安装包目录</li></ul> <p><code>[root@bogon src]# cd nginx-1.6.2</code></p> <p>-3-4 编译安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token punctuation">[</span>root@bogon nginx-1.6.2<span class="token punctuation">]</span><span class="token comment"># ./configure --prefix=/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre=/usr/local/src/pcre-8.35</span>
<span class="token punctuation">[</span>root@bogon nginx-1.6.2<span class="token punctuation">]</span><span class="token comment"># make</span>
<span class="token punctuation">[</span>root@bogon nginx-1.6.2<span class="token punctuation">]</span><span class="token comment"># make install</span>

</code></pre></div><ul><li>3-5、查看 nginx 版本</li></ul> <p><code>[root@bogon nginx-1.6.2]# /usr/local/webserver/nginx/sbin/nginx -v</code></p> <p>到此，nginx 安装完成。</p> <h2 id="_2-配置">2. 配置</h2> <ol><li>创建 Nginx 运行使用的用户 www：</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token punctuation">[</span>root@bogon conf<span class="token punctuation">]</span># <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>groupadd www
<span class="token punctuation">[</span>root@bogon conf<span class="token punctuation">]</span># <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>useradd <span class="token operator">-</span>g www www

</code></pre></div><ol start="2"><li>配置 nginx.conf ，将/usr/local/webserver/nginx/conf/nginx.conf 替换为以下内容</li></ol> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token keyword">user</span> <span class="token keyword">root</span><span class="token punctuation">;</span>
<span class="token keyword">worker_processes</span> auto<span class="token punctuation">;</span>
<span class="token keyword">error_log</span> <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
<span class="token keyword">pid</span> <span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span><span class="token punctuation">;</span>

<span class="token comment"># Load dynamic modules. See /usr/share/nginx/README.dynamic.</span>
<span class="token keyword">include</span> <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>modules<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>

<span class="token keyword">events</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> epoll<span class="token punctuation">;</span>
    <span class="token keyword">worker_connections</span> <span class="token number">1024</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">http</span> <span class="token punctuation">{</span>
    <span class="token keyword">log_format</span>  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>

    <span class="token keyword">sendfile</span>            on<span class="token punctuation">;</span>
    <span class="token keyword">types_hash_max_size</span> <span class="token number">2048</span><span class="token punctuation">;</span>

    <span class="token keyword">include</span>             <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>mime<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">;</span>
    <span class="token comment">#default_type        text/html;</span>

    <span class="token comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span>
    <span class="token comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span>
    <span class="token comment"># for more information.</span>
    <span class="token keyword">include</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
    <span class="token keyword">server_names_hash_bucket_size</span> <span class="token number">128</span><span class="token punctuation">;</span>
    <span class="token keyword">client_header_buffer_size</span> <span class="token number">32</span>k<span class="token punctuation">;</span>
    <span class="token keyword">large_client_header_buffers</span> <span class="token number">4</span> <span class="token number">32</span>k<span class="token punctuation">;</span>
    <span class="token keyword">client_max_body_size</span> <span class="token number">8</span>m<span class="token punctuation">;</span>

    <span class="token keyword">tcp_nopush</span> on<span class="token punctuation">;</span>
    <span class="token keyword">keepalive_timeout</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token keyword">tcp_nodelay</span> on<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_connect_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_send_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_read_timeout</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_buffer_size</span> <span class="token number">64</span>k<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_buffers</span> <span class="token number">4</span> <span class="token number">64</span>k<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_busy_buffers_size</span> <span class="token number">128</span>k<span class="token punctuation">;</span>z
    <span class="token keyword">fastcgi_temp_file_write_size</span> <span class="token number">128</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip</span> on<span class="token punctuation">;</span>
    <span class="token keyword">gzip_min_length</span> <span class="token number">1</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip_buffers</span> <span class="token number">4</span> <span class="token number">16</span>k<span class="token punctuation">;</span>
    <span class="token keyword">gzip_http_version</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
    <span class="token keyword">gzip_comp_level</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">gzip_types</span> text<span class="token operator">/</span>plain application<span class="token operator">/</span>x<span class="token operator">-</span>javascript text<span class="token operator">/</span>css application<span class="token operator">/</span>xml<span class="token punctuation">;</span>
    <span class="token keyword">gzip_vary</span> on<span class="token punctuation">;</span>

    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  weiya<span class="token punctuation">.</span>design<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token comment"># index    index.html;</span>
        <span class="token comment"># Load configuration files for the default server block.</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">root</span> <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span>static<span class="token operator">/</span><span class="token punctuation">;</span>
          <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>
        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
          <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  docs<span class="token punctuation">.</span>weiya<span class="token punctuation">.</span>live<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token comment"># index    index.html;</span>
        <span class="token comment"># Load configuration files for the default server block.</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
          <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">server</span> <span class="token punctuation">{</span>
        <span class="token keyword">listen</span>       <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token keyword">server_name</span>  docs<span class="token punctuation">.</span>weiya<span class="token punctuation">.</span>design<span class="token punctuation">;</span>
        <span class="token keyword">root</span>         <span class="token operator">/</span>var<span class="token operator">/</span>www<span class="token operator">/</span>magellan<span class="token operator">/</span><span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
          <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">3000</span><span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>

        <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>检查配置文件 nginx.conf 的正确性命令：</li></ol> <p><code>[root@bogon conf]# nginx -t</code></p> <h2 id="_3-使用">3. 使用</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>service nginx start
service nginx restart
service nginx stop

</code></pre></div><h2 id="yum">Yum</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token number">1.</span> rpm <span class="token operator">-</span>qa<span class="token operator">|</span>grep 软件包名

<span class="token number">2.</span> rpm <span class="token operator">-</span>ql <span class="token function">软件包名</span>  <span class="token punctuation">(</span>l是<span class="token constant">L</span>的小写<span class="token punctuation">,</span>不是坚线<span class="token punctuation">)</span>

</code></pre></div><h2 id="error">Error</h2> <div class="language-ts extra-class"><pre class="language-ts"><code>

<span class="token number">28</span>
down vote
accepted
<span class="token constant">I</span> will recommend stopping nginx by killing it<span class="token string">'s master process first. The nginx is not shutdown properly may be because of that it can'</span>t be stopped using init script<span class="token punctuation">.</span>

ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep nginx

This will show you the <span class="token constant">PID</span> <span class="token keyword">of</span> nginx master process<span class="token punctuation">.</span> Like you mentioned above<span class="token operator">:</span>

root <span class="token number">19506</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">2013</span> <span class="token operator">?</span> <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> nginx<span class="token operator">:</span> master process <span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>nginx <span class="token operator">-</span>c <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf

Kill it using

kill <span class="token operator">-</span><span class="token number">9</span> <span class="token number">19506</span>

Verify once again whether there <span class="token keyword">is</span> <span class="token builtin">any</span> nginx process running or port <span class="token number">80</span> <span class="token keyword">is</span> occupied<span class="token punctuation">.</span> If you see <span class="token builtin">any</span> process <span class="token keyword">is</span> bind to port <span class="token number">80</span><span class="token punctuation">,</span> Identify the <span class="token constant">PID</span> and check <span class="token keyword">if</span> it can be killed<span class="token punctuation">.</span>

ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep nginx

netstat <span class="token operator">-</span>tulpn <span class="token operator">|</span>grep <span class="token number">80</span>

make sure the filesystem <span class="token keyword">is</span> fine and you can read<span class="token operator">/</span>write to <span class="token operator">/</span><span class="token keyword">var</span> file system<span class="token punctuation">.</span> Then Start nginx

service nginx start

</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/8/2018, 5:07:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/node.html" class="prev">Node</a></span> <span class="copyright"><a target="_blank" href="http://beian.miit.gov.cn/">豫ICP备19002975号</a></span> <span class="next"><a href="/common-sense.html">Language</a>→
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.14fed451.js" defer></script><script src="/assets/js/3.2ffe6a61.js" defer></script><script src="/assets/js/14.12737e40.js" defer></script>
  </body>
</html>
