(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{166:function(t,s,a){t.exports=a.p+"assets/img/6.854e9333.png"},187:function(t,s,a){t.exports=a.p+"assets/img/17.509f811f.jpg"},188:function(t,s,a){t.exports=a.p+"assets/img/1.7ba7cd1c.png"},189:function(t,s,a){t.exports=a.p+"assets/img/2.e17ae416.png"},190:function(t,s,a){t.exports=a.p+"assets/img/3.ecb6a4ce.png"},191:function(t,s,a){t.exports=a.p+"assets/img/5.41ceac9f.png"},192:function(t,s){t.exports="data:image/png;base64,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"},193:function(t,s,a){t.exports=a.p+"assets/img/22.2dc46bfb.jpg"},194:function(t,s,a){t.exports=a.p+"assets/img/12.cbbff3fb.png"},195:function(t,s,a){t.exports=a.p+"assets/img/13.bdece5eb.png"},196:function(t,s,a){t.exports=a.p+"assets/img/14.15015543.png"},197:function(t,s,a){t.exports=a.p+"assets/img/8.455c97fc.png"},198:function(t,s){t.exports="data:image/png;base64,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"},199:function(t,s){t.exports="data:image/png;base64,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"},200:function(t,s){t.exports="data:image/png;base64,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"},201:function(t,s,a){t.exports=a.p+"assets/img/18.fa711a30.jpg"},202:function(t,s,a){t.exports=a.p+"assets/img/16.5454493f.jpeg"},203:function(t,s,a){t.exports=a.p+"assets/img/29.684c951e.jpeg"},204:function(t,s,a){t.exports=a.p+"assets/img/25.a4b98e77.jpg"},205:function(t,s,a){t.exports=a.p+"assets/img/26.27d48300.png"},206:function(t,s,a){t.exports=a.p+"assets/img/27.0e2a8a62.png"},207:function(t,s,a){t.exports=a.p+"assets/img/24.83ffb901.png"},208:function(t,s,a){t.exports=a.p+"assets/img/40.22dad94f.jpg"},209:function(t,s,a){t.exports=a.p+"assets/img/30.77dc4ba0.jpg"},210:function(t,s,a){t.exports=a.p+"assets/img/31.5abb2d40.jpg"},211:function(t,s,a){t.exports=a.p+"assets/img/33.5a17895d.jpg"},212:function(t,s,a){t.exports=a.p+"assets/img/15.0c56878c.png"},213:function(t,s,a){t.exports=a.p+"assets/img/38.600d6d3b.png"},214:function(t,s,a){t.exports=a.p+"assets/img/42.9da824e5.png"},243:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"browser"}},[t._v("Browser")]),t._v(" "),n("h2",{attrs:{id:"_1-浏览器种类"}},[t._v("1. 浏览器种类")]),t._v(" "),n("p",[n("img",{attrs:{src:a(187),alt:"10"}})]),t._v(" "),n("ul",[n("li",[t._v("Chrome / Chromium "),n("code",[t._v("WebKit")])]),t._v(" "),n("li",[t._v("firefox "),n("code",[t._v("Gecko")])]),t._v(" "),n("li",[t._v("Safari "),n("code",[t._v("WebKit")])]),t._v(" "),n("li",[t._v("ie "),n("code",[t._v("💥Trident")])]),t._v(" "),n("li",[t._v("opera "),n("code",[t._v("Blink")])])]),t._v(" "),n("h2",{attrs:{id:"_2-浏览器组成"}},[t._v("2. 浏览器组成")]),t._v(" "),n("p",[n("img",{attrs:{src:a(188),alt:"browser "}})]),t._v(" "),n("ol",[n("li",[n("p",[n("code",[t._v("用户界面")]),t._v("。包括地址栏、前进/后退按钮、书签菜单等。除了浏览器主窗口显示的您请求的页面外，其他显示的各个部分都属于用户界面。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("浏览器引擎")]),t._v("。在用户界面和呈现引擎之间传送指令。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("渲染引擎")]),t._v("。负责显示请求的内容。如果请求的内容是 HTML，它就负责解析 HTML 和 CSS 内容，并将解析后的内容显示在屏幕上。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("网络层")]),t._v("。用于网络调用，比如 HTTP 请求。其接口与平台无关，并为所有平台提供底层实现。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("用户界面后端")]),t._v("。用于绘制基本的窗口小部件，比如组合框和窗口。其公开了与平台无关的通用接口，而在底层使用操作系统的用户界面方法。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("JavaScript 解释器。")]),t._v("用于解析和执行 JavaScript 代码。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("数据存储。")]),t._v("这是持久层。浏览器需要在硬盘上保存各种数据，例如 Cookie。新的 HTML 规范 (HTML5) 定义了“网络数据库”，这是一个完整（但是轻便）的浏览器内数据库。")])])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("Cookie\nlocalStorage\nSession\nIndexDb")])]),t._v(" "),n("h2",{attrs:{id:"_3-浏览器线程"}},[t._v("3. 浏览器线程")]),t._v(" "),n("p",[n("img",{attrs:{src:a(189),alt:"browser "}})]),t._v(" "),n("h3",{attrs:{id:"_3-1-浏览器中的线程介绍"}},[t._v("3.1 浏览器中的线程介绍")]),t._v(" "),n("p",[t._v("通常一个浏览器会至少存在三个线程："),n("code",[t._v("JS引擎线程（用于处理JS）")]),t._v("、"),n("code",[t._v("GUI渲染线程（用于页面渲染）")]),t._v("、"),n("code",[t._v("浏览器时间触发线程（用于控制交互）")]),t._v("。\n而因为JS可以操作DOM元素，进而会影响到GUI的渲染结果，因此JS引擎线程与GUI渲染线程是互斥的。也就是说当JS引擎线程处于运行状态时，GUI渲染线程将处于冻结状态。\nJS引擎是基于事件驱动，采用的是单线程运行机制。即JS引擎会只会顺序的从任务列表中取任务，并执行。")]),t._v(" "),n("h3",{attrs:{id:"_3-2-一般情况下浏览器至少有三个常驻线程"}},[t._v("3.2 一般情况下浏览器至少有三个常驻线程")]),t._v(" "),n("p",[t._v("（1）UI线程 "),n("code",[t._v("GUI渲染线程（渲染页面)")])]),t._v(" "),n("p",[t._v("（2）JS线程 "),n("code",[t._v("JS引擎线程（处理脚本)")])]),t._v(" "),n("p",[t._v("（3）事件(触发)线程 "),n("code",[t._v("事件触发线程（控制交互)")])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("包括浏览器有时候会开辟新的线程比如用完就扔的Http请求线程（Ajax）等等其他线程\n它们共同构成了浏览器的UI线程\n这些线程在UI线程的控制下井然有序的工作着\n关于这个常驻线程网上观点不一致，各个浏览器实现可能也不一样，这里就不深考究了\n虽然我把js引擎线程放在了右下角，但是它是浏览器的主线程\n而且"),n("code",[t._v("它和GUI渲染线程")]),t._v("是水火不容的，不能够同时工作\n"),n("code",[t._v("道理很简单，因为它们都要影响DOM，如果 js 线程想要某个DOM的样式，渲染引擎必须停止工作")])])]),t._v(" "),n("p",[t._v("🐯🙃🏃🎉⚠️")]),t._v(" "),n("h3",{attrs:{id:"_3-3-例子-settimeout-setinternal"}},[t._v("3.3 例子 SetTimeout/SetInternal")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("其中 SetTimeout ：在指定的毫秒数后调用指定的代码段；SetInternal：在指定的时间间隔内（ms）循环调用指定的代码段。这两个函数内都涉及到时间计数器，也就是都涉及到一个类似与MFC定时器。JS引擎本身就只能单线程运行，因此定时器需要由其他的外部线程来启动。所以对JS引擎而言，定时器线程可以被视为异步线程。但当定时器时间到达后，所触发的事件则必须在任务列表中排队，等候JS引擎的处理。")])]),t._v(" "),n("p",[t._v("关于setTimeout下面有一个例子，可以帮助深入理解：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end 2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end 1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("执行的结果是弹出‘end’‘end 1’，然后浏览器假死，就是不弹出‘end 2’。也就是说第一个settimeout里执行的时候是一个死循环，这个直接导致了理论上比它晚一秒执行的第二个settimeout里的函数被阻塞，这个和我们平时所理解的异步函数多线程互不干扰是不符的。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(190),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_3-4-js单线程"}},[t._v("3.4 JS单线程")]),t._v(" "),n("p",[t._v("为什么"),n("code",[t._v("JavaScript是单线程 单线程就是同一时间只能干一件事")])]),t._v(" "),n("p",[n("code",[t._v("那么JavaScript多线程不好吗，那效率多高啊 ? 不好")])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("js设计出来就是为了与用户交互，处理DOM\n"),n("code",[t._v("如果JavaScript多线程了，那就必须处理多线程同步的问题")]),t._v("（依稀记得曾经被C++线程同步支配的恐怖\n"),n("code",[t._v("假如js是多线程，同一时间一个线程想要修改DOM，另一个线程想要删除DOM 问题就变得复杂许多，浏览器不知道听谁的，如果引入“锁”的机制，那就麻烦死了（那我就不学前端了(￣_,￣ )")]),t._v("\n这样一个"),n("code",[t._v("脚本语言")]),t._v("根本没有必要搞得那么复杂，所以"),n("code",[t._v("JavaScript诞生起就是单线程执行")])])]),t._v(" "),n("p",[t._v("虽然H5提出了"),n("code",[t._v("Web Worker")]),t._v("，但是"),n("code",[t._v("它不能够操作DOM")]),t._v("，还是要"),n("code",[t._v("委托给大哥js主线程解决")]),t._v("\n这些子线程完全受主线程老大控制的（而且受很多限制），实际上"),n("code",[t._v("并没有改变JavaScript单线程的本质")])]),t._v(" "),n("h3",{attrs:{id:"_3-5-执行栈"}},[t._v("3.5 执行栈")]),t._v(" "),n("p",[t._v("我们先来看看什么是执行栈\n栈是"),n("code",[t._v("先进后出（FILO）的数据结构")]),t._v(" "),n("code",[t._v("执行栈")]),t._v("中存放正在执行的任务，"),n("code",[t._v("每一个任务叫做“帧”")]),t._v("\n举个例子")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("我们来看看执行栈发生了怎样的变化")]),t._v(" "),n("ul",[n("li",[t._v("最开始，代码没有执行的时候，"),n("code",[t._v("执行栈为空栈")])]),t._v(" "),n("li",[t._v("foo函数执行时，创建了一帧，这帧中包含了形参、局部变量（预编译过程），然后把这一帧压入栈中")]),t._v(" "),n("li",[t._v("然后执行foo函数内代码，执行bar函数")]),t._v(" "),n("li",[t._v("创建新帧，同样有形参、局部变量，压入栈中")]),t._v(" "),n("li",[t._v("bar函数执行完毕，弹出栈")]),t._v(" "),n("li",[t._v("foo函数执行完毕，弹出栈")]),t._v(" "),n("li",[t._v("执行栈为空")])]),t._v(" "),n("p",[n("code",[t._v("执行栈其实相当于js主线程（同步顺序执行）")])]),t._v(" "),n("h3",{attrs:{id:"_3-6-任务队列"}},[t._v("3.6 任务队列")]),t._v(" "),n("p",[n("code",[t._v("队列是先入先出（FIFO）的数据结构")]),t._v(" "),n("code",[t._v("js线程中还存在着一个任务队列")]),t._v("\n任务队列包含了一系列待处理的任务\n"),n("code",[t._v("单线程就意味着所有任务需要一个接一个的执行，如果一个任务执行的时间太长，那后面的任务就不得不等着")])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("就好比护士阿姨给排队的小朋友打针，如果最前面的小朋友一直滚针，那就一直扎，后面的小朋友就得等着（这比喻好像不恰当）\n可是如果最前面的小朋友晕针昏倒了\n那么护士阿姨不可能坐那里了等到他醒来，应该先给后面的小朋友扎针\n也就是相当于把那位小朋友“挂起”（异步）")])]),t._v(" "),n("p",[t._v("所以，任务可以分为两种")]),t._v(" "),n("ul",[n("li",[t._v("同步任务")]),t._v(" "),n("li",[t._v("异步任务")])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[n("code",[t._v("同步任务就是正在主线程执行栈中执行的任务（在屋子内打针的小朋友）")]),t._v(" "),n("code",[t._v("而异步任务是在任务队列等候处理的任务（在屋子外等候打针的小朋友）")]),t._v("\n一旦执行栈中没有任务了，它就会从"),n("code",[t._v("执行队列")]),t._v("中获取任务执行")])]),t._v(" "),n("h3",{attrs:{id:"_3-6-事件与回调"}},[t._v("3.6 事件与回调")]),t._v(" "),n("p",[n("code",[t._v("任务队列是一个事件的队列")]),t._v("，IO设备（输入/输出设备）每完成一项任务，就会在"),n("code",[t._v("任务队列中添加事件处理")]),t._v("\n用户"),n("code",[t._v("触发了事件")]),t._v("，也同样会"),n("code",[t._v("将回调添加到任务队列中去")]),t._v("\n主线程执行"),n("code",[t._v("异步任务")]),t._v("，便是"),n("code",[t._v("执行回调函数（事件处理函数）")]),t._v("\n只要执行栈一空，排在执行队列前面的处理函数便会被优先读取执行\n"),n("code",[t._v("不过主线程会检查时间，某些事件需要到了规定时间才能进入主线程处理（定时器事件）")])]),t._v(" "),n("h3",{attrs:{id:"_3-7-简述-事件循环-event-loop"}},[t._v("3.7 简述 事件循环(Event Loop)")]),t._v(" "),n("p",[n("code",[t._v("Event Loop")]),t._v(" "),n("img",{attrs:{src:a(191),alt:"Alt text"}})]),t._v(" "),n("p",[n("code",[t._v("主线程从执行队列不断地获取任务，这个过程是循环不断地，叫做“Event Loop”事件循环 同步任务总是会在异步任务之前执行 只有当前的脚本执行完，才能够去拿任务队列中的任务执行 前面也说到了，任务队列中的事件可以是定时器事件 定时器分为两种 setTimeout() 和 setInterval() 前者是定时执行一次，后者定时重复执行 第一个参数为执行的回调函数，第二个参数为间隔时间（ms）")]),t._v("\n来看这样一个例子")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这个没什么问题，浏览器打印的是")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" timer\n")])])]),n("p",[t._v("但是这样呢")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//0延时")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("浏览器打印依然打印的是 "),n("code",[t._v("1 2 3 timer")]),t._v("\n也许有同学知道，旧版浏览器，setTimeout定时至少是10ms（即便你设置了0ms），\n"),n("code",[t._v("H5新规范是定时至少4ms")]),t._v("，改变"),n("code",[t._v("DOM也是至少16ms")]),t._v("\n我们可以暂且认为是这个原因\n那么我再改动一下代码")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1e5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这回够刺激了吧，输出10w次，我浏览器都假死了（心疼我chrome）\n不仅如此，我还打印了循环所用时间\n来看看控制台")]),t._v(" "),n("p",[n("img",{attrs:{src:a(192),alt:"Alt text"}})]),t._v(" "),n("p",[t._v("输出了10w个1，用了将近7s\ntimer依然在最后打印\n这就证明了我前面说的话: 同步任务总是会在异步任务之前执行\n只有我执行栈空了，才会去你任务队列中取任务执行")]),t._v(" "),n("p",[t._v("实例\n最后我举一个例子加深一下理解")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("demo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    click"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//伪代码 此时触发了click事件（这里我假装程序运行到这里手动点击了demo）")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("怕大家蒙我就不写Ajax了\nAjax如果处理结束后（通过Http请求线程），也会将回调函数放在任务队列中\n还有一点 click 那一行伪代码我最开始是想用demo.click()模拟触发事件\n后来在测试过程中，发现它好像跟真实触发事件不太一样\n它应该是不通过触发事件线程，而是存在于执行栈中，就相当于单纯地执行click回调函数\n不过这只是我自己的想法有待考证，不过这不是重点，重点是我们理解这个过程，请大家不要吐槽我╰(￣▽￣)╭")]),t._v(" "),n("p",[t._v("下面看看执行这段代码时发生了什么（主要说栈和队列的问题，不会赘述预编译过程）")]),t._v(" "),n("ul",[n("li",[t._v("主线程开始执行，产生了栈、堆、队列")]),t._v(" "),n("li",[t._v("demo节点绑定了事件 click ，交给事件触发线程异步监听")]),t._v(" "),n("li",[t._v("执行foo函数（之前同样有预编译过程），创建了帧包括foo函数的形参、局部变量压入执行栈中")]),t._v(" "),n("li",[t._v("foo函数内执行 bar 函数，创建帧包括bar函数的形参、局部变量压入执行栈中")]),t._v(" "),n("li",[t._v("触发了click事件，事件触发线程将回调事件处理函数放到js线程的任务队列中")]),t._v(" "),n("li",[t._v("触发了定时器事件，事件触发线程立即（4ms）将回调处理函数放到 js 线程的任务队列中bar函数执行完毕，弹出栈")]),t._v(" "),n("li",[t._v("foo函数执行完毕，弹出栈")]),t._v(" "),n("li",[t._v("此时执行栈为空")]),t._v(" "),n("li",[t._v("执行栈向任务队列中获取一个任务执行：click回调函数，输出‘click’")]),t._v(" "),n("li",[t._v("执行栈向任务队列中获取一个任务执行：定时器回调函数，输出‘timer’")]),t._v(" "),n("li",[t._v("执行结束")]),t._v(" "),n("li",[t._v("这里从任务队列里不断取任务的过程就是Event Loop")])]),t._v(" "),n("h2",{attrs:{id:"_4-🐯js-事件循环详解"}},[t._v("4. 🐯JS 事件循环详解")]),t._v(" "),n("p",[n("img",{attrs:{src:a(193),alt:"Important"}})]),t._v(" "),n("p",[n("code",[t._v("大量摘抄")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(166),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_4-1-js-事件循环前言"}},[t._v("4.1 JS 事件循环前言")]),t._v(" "),n("p",[t._v("这一次，彻底弄懂 JavaScript 执行机制\n本文的目的就是要保证你彻底弄懂javascript的执行机制，如果读完本文还不懂，可以揍我。")]),t._v(" "),n("p",[t._v("不论你是javascript新手还是老鸟，不论是面试求职，还是日常开发工作，我们经常会遇到这样的情况：给定的几行代码，我们需要知道其输出内容和顺序。因为javascript是一门单线程语言，所以我们可以得出结论：")]),t._v(" "),n("p",[t._v("javascript是按照语句出现的顺序执行的\n看到这里读者要打人了：我难道不知道js是一行一行执行的？还用你说？稍安勿躁，正因为js是一行一行执行的，所以我们以为js都是这样的：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("然而实际上js是这样的：\n"),n("img",{attrs:{src:a(194),alt:"10"}})]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'定时器开始啦'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'马上执行for循环啦'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'执行then函数啦'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'代码执行结束'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(195),alt:"10"}})]),t._v(" "),n("p",[t._v("依照js是"),n("code",[t._v("按照语句出现的顺序")]),t._v("执行这个理念，我自信的写下输出结果：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"定时器开始啦"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"马上执行for循环啦"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"执行then函数啦"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"代码执行结束"')]),t._v("\n")])])]),n("p",[t._v("去chrome上验证下，结果完全不对，瞬间懵了，说好的一行一行执行的呢？\n"),n("img",{attrs:{src:a(196),alt:"10"}})]),t._v(" "),n("p",[t._v("我们真的要彻底弄明白javascript的执行机制了。")]),t._v(" "),n("h3",{attrs:{id:"_4-2-主要执行顺序"}},[t._v("4.2 主要执行顺序")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[n("code",[t._v("宏任务 --\x3e 微任务 --\x3e 宏任务 --\x3e 微任务 --\x3e[]")])])]),t._v(" "),n("ul",[n("li",[t._v("macro-task(宏任务)：包括"),n("code",[t._v("整体代码script，setTimeout，setInterval, new Promise")])]),t._v(" "),n("li",[t._v("micro-task(微任务)："),n("code",[t._v("Promise.then，process.nextTick")])]),t._v(" "),n("li",[t._v("⚠️"),n("code",[t._v("主要代码结构就是宏任务")]),t._v(" 之后"),n("code",[t._v("执行微任务")])])]),t._v(" "),n("h3",{attrs:{id:"_4-3-关于javascript"}},[t._v("4.3 关于javascript")]),t._v(" "),n("p",[t._v('javascript是一门单线程语言，在最新的HTML5中提出了Web-Worker，但javascript是单线程这一核心仍未改变。所以一切javascript版的"多线程"都是用单线程模拟出来的，一切javascript多线程都是纸老虎！')]),t._v(" "),n("h3",{attrs:{id:"_4-4-javascript事件循环"}},[t._v("4.4 javascript事件循环")]),t._v(" "),n("p",[t._v("既然js是单线程，那就像只有一个窗口的银行，客户需要排队一个一个办理业务，同理js任务也要一个一个顺序执行。如果一个任务耗时过长，那么后一个任务也必须等着。那么问题来了，假如我们想浏览新闻，但是新闻包含的超清图片加载很慢，难道我们的网页要一直卡着直到图片完全显示出来？因此聪明的程序员将任务分为两类：")]),t._v(" "),n("ul",[n("li",[t._v("同步任务")]),t._v(" "),n("li",[t._v("异步任务")])]),t._v(" "),n("p",[t._v("当我们打开网站时，网页的渲染过程就是一大堆同步任务，比如页面骨架和页面元素的渲染。而像加载图片音乐之类占用资源大耗时久的任务，就是异步任务。关于这部分有严格的文字定义，但本文的目的是用最小的学习成本彻底弄懂执行机制，所以我们用导图来说明：\n"),n("img",{attrs:{src:a(197),alt:"Important"}})]),t._v(" "),n("p",[t._v("导图要表达的内容用文字来表述的话：")]),t._v(" "),n("ul",[n("li",[t._v('同步和异步任务分别进入不同的执行"场所"，同步的进入主线程，异步的进入Event Table并注册函数。')]),t._v(" "),n("li",[t._v("当指定的事情完成时，Event Table会将这个函数移入 Event Queue。")]),t._v(" "),n("li",[t._v("主线程内的任务执行完毕为空，会去Event Queue读取对应的函数，进入主线程执行。")]),t._v(" "),n("li",[t._v("上述过程会不断重复，也就是常说的Event Loop(事件循环)。")])]),t._v(" "),n("p",[t._v("我们不禁要问了，那怎么知道主线程执行栈为空啊？js 引擎存在 monitoring process进程，会持续不断的检查主线程执行栈是否为空，一旦为空，就会去Event Queue那里检查是否有等待被调用的函数。")]),t._v(" "),n("p",[t._v("说了这么多文字，不如直接一段代码更直白：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ajax")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    url"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'发送成功!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'代码执行结束'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("上面是一段简易的ajax请求代码：")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("ajax")]),t._v("进入Event Table，注册"),n("code",[t._v("回调函数success")]),t._v("。")]),t._v(" "),n("li",[t._v("执行console.log('代码执行结束')。")]),t._v(" "),n("li",[t._v("ajax事件完成，回调函数 success 进入Event Queue。")]),t._v(" "),n("li",[t._v("主线程从Event Queue 读取回调函数 success 并执行。")])]),t._v(" "),n("blockquote",[n("p",[t._v("相信通过上面的文字和代码，你已经对js的执行顺序有了初步了解。接下来我们来研究进阶话题：setTimeout。")])]),t._v(" "),n("h3",{attrs:{id:"_4-5-又爱又恨的-settimeout"}},[t._v("4.5 又爱又恨的 setTimeout")]),t._v(" "),n("blockquote",[n("p",[t._v("大名鼎鼎的setTimeout无需再多言，大家对他的第一印象就是异步可以延时执行，我们经常这么实现延时3秒执行：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'延时3秒'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("渐渐的setTimeout用的地方多了，问题也出现了，有时候明明写的延时3秒，实际却5，6秒才执行函数，这又咋回事啊？")]),t._v(" "),n("p",[t._v("先看一个例子：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'执行console'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[t._v("根据前面我们的结论，setTimeout是异步的，应该先执行console.log这个同步任务，所以我们的结论是：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//执行console")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//task()")]),t._v("\n")])])]),n("ul",[n("li",[t._v("去验证一下，结果正确！然后我们修改一下前面的代码：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("乍一看其实差不多嘛，但我们把这段代码在chrome执行一下，却发现控制台执行task()需要的时间远远超过3秒，说好的延时三秒，为啥现在需要这么长时间啊？")]),t._v(" "),n("p",[t._v("这时候我们需要重新理解setTimeout的定义。我们先说上述代码是怎么执行的：")]),t._v(" "),n("p",[n("code",[t._v("Important")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("task()")]),t._v("进入"),n("code",[t._v("Event Table")]),t._v("并注册,计时开始。")]),t._v(" "),n("li",[t._v("执行"),n("code",[t._v("sleep")]),t._v("函数，很慢，非常慢，计时仍在继续。")]),t._v(" "),n("li",[t._v("3秒到了，计时事件"),n("code",[t._v("timeout")]),t._v("完成，task()进入"),n("code",[t._v("Event Queue")]),t._v("，但是"),n("code",[t._v("sleep也太慢了吧，还没执行完，只好等着。")])]),t._v(" "),n("li",[n("code",[t._v("sleep终于执行完")]),t._v("了，"),n("code",[t._v("task()")]),t._v("终于从Event Queue进入了主线程执行。")])]),t._v(" "),n("p",[t._v("上述的流程走完，我们知道"),n("code",[t._v("setTimeout")]),t._v("这个函数，是经过指定时间后，把要执行的任务(本例中为task())加入到Event Queue中，"),n("code",[t._v("又因为是单线程任务要一个一个执行，如果前面的任务需要的时间太久，那么只能等着，导致真正的延迟时间远远大于3秒")]),t._v("。")]),t._v(" "),n("p",[t._v("我们还经常遇到"),n("code",[t._v("setTimeout(fn,0)")]),t._v("这样的代码，0秒后执行又是什么意思呢？是不是可以立即执行呢？")]),t._v(" "),n("p",[t._v("答案是不会的，"),n("code",[t._v("setTimeout(fn,0)的含义是，指定某个任务在主线程最早可得的空闲时间执行，意思就是不用再等多少秒了，只要主线程执行栈内的同步任务全部执行完成，")]),t._v("栈为空就马上执行。举例说明：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//代码1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'先执行这里'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'执行啦'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//代码2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'先执行这里'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'执行啦'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("代码1的输出结果是：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//先执行这里")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//执行啦")]),t._v("\n")])])]),n("p",[t._v("代码2的输出结果是：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//先执行这里")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 3s later")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行啦")]),t._v("\n")])])]),n("p",[t._v("关于setTimeout要补充的是，即便主线程为空，0毫秒实际上也是达不到的。根据HTML的标准，"),n("code",[t._v("最低是4毫秒")]),t._v("。有兴趣的同学可以自行了解。")]),t._v(" "),n("h3",{attrs:{id:"_4-6-又恨又爱的setinterval"}},[t._v("4.6 又恨又爱的setInterval")]),t._v(" "),n("p",[t._v("上面说完了setTimeout，当然不能错过它的孪生兄弟setInterval。他俩差不多，只不过后者是循环的执行。\n"),n("code",[t._v("对于执行顺序来说，setInterval会每隔指定的时间将注册的函数置入 Event Queue")]),t._v("，如果前面的任务耗时太久，那么同样需要等待。")]),t._v(" "),n("p",[t._v("唯一需要注意的一点是，对于"),n("code",[t._v("setInterval(fn,ms)")]),t._v("来说，我们已经知道"),n("code",[t._v("不是每过 ms秒会执行一次 fn，而是每过 ms秒，会有 fn进入 Event Queue")]),t._v("。一旦setInterval的回调函数"),n("code",[t._v("fn")]),t._v("执行时间超过了"),n("code",[t._v("延迟时间ms")]),t._v("，那么就完全"),n("code",[t._v("看不出来有时间间隔了")]),t._v("。这句话请读者仔细品味。")]),t._v(" "),n("p",[t._v("让我们想象一个意外情况，比如说下面的setInterval")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("我们每100毫秒调用一次func函数，如果func的执行时间少于100毫秒的话，在遇到下一个100毫秒前就能够执行完：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(198),alt:"10"}}),t._v("\n但如果func的执行时间大于100毫秒，该触发下一个func函数时之前的还没有执行完怎么办？答案如下图所示，那么第二个func会在队列（这里的队列是指event loop）中等待，直到第一个函数执行完\n"),n("img",{attrs:{src:a(199),alt:"11"}})]),t._v(" "),n("p",[t._v("如果第一个函数的执行时间特别长，在执行的过程中本应触发了许多个func怎么办，那么所有这些应该触发的函数都会进入队列吗？")]),t._v(" "),n("p",[t._v("不，只要发现队列中有一个被执行的函数存在，那么其他的统统忽略。如下图，在第300毫秒和400毫秒处的回调都被抛弃，一旦第一个函数执行完后，接着执行队列中的第二个，即使这个函数已经“过时”很久了。\n"),n("img",{attrs:{src:a(200),alt:"10"}})]),t._v(" "),n("p",[t._v("还有一点，虽然你在setInterval的里指定的周期是100毫秒，但它并不能保证两个函数之间调用的间隔一定是一百毫秒。在上面的情况中，如果队列中的第二个函数时在第450毫秒处结束的话，在第500毫秒时，它会继续执行下一轮func，也就是说这之间的间隔只有50毫秒，而非周期100毫秒")]),t._v(" "),n("h3",{attrs:{id:"_4-7-promise-then与-process-nexttick-cb"}},[t._v("4.7 Promise.then与 process.nextTick(cb)")]),t._v(" "),n("p",[t._v("传统的定时器我们已经研究过了，接着我们探究 Promise与 process.nextTick(callback)的表现。")]),t._v(" "),n("p",[t._v('Promise的定义和功能本文不再赘述，不了解的读者可以学习一下阮一峰老师的Promise。而process.nextTick(callback)类似node.js版的"setTimeout"，在事件循环的下一次循环中调用 callback 回调函数。')]),t._v(" "),n("h3",{attrs:{id:"_4-8-宏任务和微任务"}},[t._v("4.8 宏任务和微任务")]),t._v(" "),n("blockquote",[n("p",[n("code",[t._v("我们进入正题，除了广义的同步任务和异步任务，我们对任务有更精细的定义：")])])]),t._v(" "),n("ul",[n("li",[t._v("macro-task(宏任务)：包括"),n("strong",[t._v("整体代码script，setTimeout，setInterval, "),n("code",[t._v("new Promise")])])]),t._v(" "),n("li",[t._v("micro-task(微任务)：Promise.then，process.nextTick")])]),t._v(" "),n("p",[t._v("不同类型的任务会进入对应的"),n("code",[t._v("Event Queue")]),t._v("，比如"),n("code",[t._v("setTimeout")]),t._v("和"),n("code",[t._v("setInterval")]),t._v("会进入相同的Event Queue。")]),t._v(" "),n("p",[t._v("事件循环的顺序，决定js代码的执行顺序。进入整体代码(宏任务)后，开始第一次循环。接着执行所有的微任务。然后再次从宏任务开始，找到其中一个任务队列执行完毕，再执行所有的微任务。听起来有点绕，我们用文章最开始的一段代码说明：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'then'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'console'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",[n("li",[t._v("这段代码作为宏任务，进入主线程。")]),t._v(" "),n("li",[t._v("先遇到setTimeout，那么将其回调函数注册后分发到宏任务Event Queue。(注册过程与上同，下文不再描述)")]),t._v(" "),n("li",[t._v("接下来遇到了Promise，new Promise立即执行，then函数分发到微任务 Event Queue。")]),t._v(" "),n("li",[t._v("遇到console.log()，立即执行。")]),t._v(" "),n("li",[t._v("好啦，整体代码script作为第一个宏任务执行结束，看看有哪些微任务？我们发现了 then在微任务 Event Queue里面，执行。")]),t._v(" "),n("li",[t._v("ok，第一轮事件循环结束了，我们开始第二轮循环，当然要从宏任务Event Queue开始。我们发现了宏任务"),n("code",[t._v("Event Queue")]),t._v("中setTimeout对应的回调函数，立即执行。")]),t._v(" "),n("li",[t._v("结束。")])]),t._v(" "),n("p",[t._v("事件循环，宏任务，微任务的关系如图所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(166),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_4-9-实战分析"}},[t._v("4.9 实战分析")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'11'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h4",{attrs:{id:"_4-9-1-第一轮事件循环"}},[t._v("4.9.1 第一轮事件循环")]),t._v(" "),n("ol",[n("li",[t._v("整体script作为第一个宏任务进入主线程，遇到console.log，输出1。")]),t._v(" "),n("li",[t._v("遇到setTimeout，其回调函数被分发到宏任务Event Queue中。我们暂且记为setTimeout1。")]),t._v(" "),n("li",[t._v("遇到process.nextTick()，其回调函数被分发到微任务Event Queue中。我们记为process1。")]),t._v(" "),n("li",[t._v("遇到Promise，new Promise直接执行，输出7。then被分发到微任务 "),n("code",[t._v("Event Queue")]),t._v("中。我们记为then1。")]),t._v(" "),n("li",[t._v("又遇到了setTimeout，其回调函数被分发到宏任务Event Queue中，我们记为setTimeout2。")]),t._v(" "),n("li",[t._v("宏任务Event Queue 微任务 Event Queue")]),t._v(" "),n("li",[t._v("setTimeout1 process1")]),t._v(" "),n("li",[t._v("setTimeout2 then1")]),t._v(" "),n("li",[t._v("上表是第一轮事件循环宏任务结束时各Event Queue的情况，此时已经输出了1和7。")]),t._v(" "),n("li",[t._v("我们发现了"),n("code",[t._v("process1和then1两个微任务")]),t._v("。")]),t._v(" "),n("li",[t._v("执行process1,输出6。")]),t._v(" "),n("li",[t._v("执行then1，输出8。")])]),t._v(" "),n("h4",{attrs:{id:"_4-9-2-第二轮事件循环"}},[t._v("4.9.2 第二轮事件循环")]),t._v(" "),n("p",[t._v("好了，第一轮事件循环正式结束，这一轮的结果是输出1，7，6，8。那么第二轮时间循环从setTimeout1宏任务开始：")]),t._v(" "),n("ol",[n("li",[t._v("首先输出2。接下来遇到了process.nextTick()，同样将其分发到微任务 Event Queue中，记为process2。new Promise立即执行输出4，then也分发到微任务 Event Queue中，\n记为then2。")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("宏任务Event Queue")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("微任务Event Queue")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("setTimeout2")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("process2")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("setTimeout2")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("then1")])])])]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("第二轮事件循环宏任务结束，我们发现有process2和then2两个微任务可以执行。")]),t._v(" "),n("li",[t._v("输出3。")]),t._v(" "),n("li",[t._v("输出5。")]),t._v(" "),n("li",[t._v("第二轮事件循环结束，第二轮输出2，4，3，5。")])]),t._v(" "),n("h4",{attrs:{id:"_4-9-3-第三轮事件循环"}},[t._v("4.9.3 第三轮事件循环")]),t._v(" "),n("ol",[n("li",[t._v("第三轮事件循环开始，此时只剩setTimeout2了，执行。")]),t._v(" "),n("li",[t._v("直接输出9。")]),t._v(" "),n("li",[t._v("将process.nextTick()分发到微任务Event Queue中。记为process3。")]),t._v(" "),n("li",[t._v("直接执行new Promise，输出11。")]),t._v(" "),n("li",[t._v("将then分发到微任务 Event Queue中，记为then3。")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("宏任务Event Queue")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("微任务Event Queue")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("process3")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("then3")])])])]),t._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[t._v("第三轮事件循环宏任务执行结束，执行两个微任务process3和then3。")]),t._v(" "),n("li",[t._v("输出10。")]),t._v(" "),n("li",[t._v("输出12。")]),t._v(" "),n("li",[t._v("第三轮事件循环结束，第三轮输出9，11，10，12。")])]),t._v(" "),n("h4",{attrs:{id:"_4-9-4-循环结束"}},[t._v("4.9.4 循环结束")]),t._v(" "),n("p",[t._v("整段代码，共进行了三次事件循环，完整的输出为1，7，6，8，2，4，3，5，9，11，10，12。")]),t._v(" "),n("p",[t._v("(请注意，node环境下的事件监听依赖 libuv与前端环境不完全相同，输出顺序可能会有误差)")]),t._v(" "),n("h4",{attrs:{id:"_4-10-写在最后"}},[t._v("4.10 写在最后")]),t._v(" "),n("p",[t._v("(1)js的异步\n我们从最开头就说javascript是"),n("code",[t._v("一门单线程")]),t._v("语言，不管是什么"),n("code",[t._v("新框架新语法糖实现的所谓异步，其实都是用同步的方法去模拟的，牢牢把握住单线程这点非常重要")]),t._v("。")]),t._v(" "),n("p",[t._v("(2)事件循环Event Loop\n事件循环是js实现异步的一种方法，也是js的执行机制。")]),t._v(" "),n("p",[t._v("(3)javascript的执行和运行\n执行和运行有很大的区别，javascript在不同的环境下，比如node，浏览器，Ringo等等，执行方式是不同的。而运行大多指javascript解析引擎，是统一的。")]),t._v(" "),n("p",[t._v("(4)setImmediate\n微任务和宏任务还有很多种类，比如setImmediate等等，执行都是有共同点的，有兴趣的同学可以自行了解。")]),t._v(" "),n("h4",{attrs:{id:"_4-11-最后的最后"}},[t._v("4.11 最后的最后")]),t._v(" "),n("p",[n("strong",[n("code",[t._v("javascript是一门单线程语言")])]),t._v(" "),n("strong",[n("code",[t._v("Event Loop 是 javascript 的执行机制")])])]),t._v(" "),n("blockquote",[n("p",[t._v("牢牢把握两个基本点，以认真学习javascript为中心，早日成为像我一样的大牛")])]),t._v(" "),n("p",[n("strong",[n("code",[t._v("皮一下, 很开心")])])]),t._v(" "),n("h2",{attrs:{id:"_5-❤️浏览器存储"}},[t._v("5. ❤️浏览器存储")]),t._v(" "),n("p",[n("img",{attrs:{src:a(201),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_5-1-cookie"}},[t._v("5.1 Cookie")]),t._v(" "),n("p",[t._v("Cookie 是小甜饼的意思。顾名思义，cookie 确实非常小，它的大小限制为"),n("code",[t._v("4KB")]),t._v("左右，是网景公司的前雇员 Lou Montulli 在1993年3月的发明。它的主要用途有"),n("code",[t._v("保存登录信息")]),t._v("，比如你登录某个网站市场可以看到“记住密码”，这通常就是通过在 Cookie 中存入一段辨别用户身份的数据来实现的。")]),t._v(" "),n("h3",{attrs:{id:"_5-2-localstorage"}},[t._v("5.2 localStorage")]),t._v(" "),n("p",[t._v("localStorage 是 HTML5 标准中新加入的技术，它并不是什么划时代的新东西。早在 IE 6 时代，就有一个叫 userData 的东西用于本地存储，而当时考虑到浏览器兼容性，更通用的方案是使用 Flash。而如今，localStorage 被大多数浏览器所支持，如果你的网站需要支持 IE6+，那以 userData 作为你的 polyfill 的方案是种不错的选择。")]),t._v(" "),n("h3",{attrs:{id:"_5-3-sessionstorage"}},[t._v("5.3 sessionStorage")]),t._v(" "),n("p",[t._v("sessionStorage 与 localStorage 的接口类似，但"),n("code",[t._v("保存数据的生命周期与 localStorage 不同")]),t._v("。做过后端开发的同学应该知道 Session 这个词的意思，直译过来是“"),n("code",[t._v("会话")]),t._v("”。而 sessionStorage 是一个前端的概念，它只是可以将一部分数据在当前会话中保存下来，"),n("code",[t._v("刷新页面数据依旧存在")]),t._v("。但当页面关闭后，sessionStorage 中的数据就会被清空。")]),t._v(" "),n("h3",{attrs:{id:"_5-4-三者的异同"}},[t._v("5.4 三者的异同")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("特性")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Cookie")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("localStorage")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("sessionStorage")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("数据的生命期")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("一般由服务器生成，可设置失效时间。如果在浏览器端生成Cookie，默认是关闭浏览器后失效")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("除非被清除，否则永久保存")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("仅在当前会话下有效，关闭页面或浏览器后被清除")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("存放数据大小")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("4K左右")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("一般为5MB")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("一般为5MB")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("与服务器端通信")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("仅在客户端（即浏览器）中保存，不参与和服务器的通信")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("仅在客户端（即浏览器）中保存，不参与和服务器的通信")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("易用性")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("需要程序员自己封装，源生的Cookie接口不友好")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("源生接口可以接受，亦可再次封装来对 Object和 Array有更好的支持")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("源生接口可以接受，亦可再次封装来对 Object和 Array有更好的支持")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("作用域大小")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("同域")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("同域")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("同域")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("数据结构")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("key-value(字符创-字符串)")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("key-value")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("key-value")])])])]),t._v(" "),n("h3",{attrs:{id:"_5-5-应用场景"}},[t._v("5.5 应用场景")]),t._v(" "),n("p",[t._v("有了对上面这些差别的直观理解，我们就可以讨论三者的应用场景了。")]),t._v(" "),n("p",[t._v("因为考虑到每个 HTTP 请求都会带着 Cookie 的信息，所以 Cookie 当然是能精简就精简啦，比较常用的一个应用场景就是判断用户是否登录。针对登录过的用户，服务器端会在他登录时往 Cookie 中插入一段加密过的唯一辨识单一用户的辨识码，下次只要读取这个值就可以判断当前用户是否登录啦。曾经还使用 Cookie 来保存用户在电商网站的购物车信息，如今有了 localStorage，似乎在这个方面也可以给 Cookie 放个假了~")]),t._v(" "),n("p",[t._v("而另一方面 localStorage 接替了 Cookie 管理购物车的工作，同时也能胜任其他一些工作。比如HTML5游戏通常会产生一些本地数据，localStorage 也是非常适用的。如果遇到一些内容特别多的表单，为了优化用户体验，我们可能要把表单页面拆分成多个子页面，然后按步骤引导用户填写。这时候 sessionStorage 的作用就发挥出来了。")]),t._v(" "),n("h3",{attrs:{id:"_5-6-web-storage-api"}},[t._v("5.6 Web Storage API")]),t._v(" "),n("p",[t._v("localStorage 和 sessionStorage 有着统一的API接口，这为二者的操作提供了极大的便利。下面以\n"),n("code",[t._v("localStorage 为例来介绍一下 API 接口使用方法，同样这些接口也适用sessionStorage")])]),t._v(" "),n("h4",{attrs:{id:"_5-6-1-添加键值对-localstorage-setitem-key-value"}},[t._v("5.6.1 添加键值对 localStorage.setItem(key, value)")]),t._v(" "),n("p",[t._v("添加键值对："),n("code",[t._v("localStorage.setItem(key, value)")]),t._v("setItem 用于把值 value 存储到键key上，除了使用 setItem ，还可以使用\n"),n("code",[t._v("localStorage.key = value")]),t._v(" 或者 "),n("code",[t._v("localStorage['key'] = value")]),t._v("这两种形式。\n另外需要注意的是，key和value值必须是字符串形式的，如果不是字符串，会调用它们相应的toString() 方法来转换成字符串再存储。\n当我们要存储对象是，应先转换成我们可识别的字符串格式（比如JSON格式）再进行存储。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 把一个用户名 ( lilei )存储到 name 的键上")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lilei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// localStorage.name = 'lilei';")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// localStorage['name'] = 'lilei';")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 把一个用户存储到user的键上")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lilei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-2-获取键值-localstorage-getitem-key"}},[t._v("5.6.2 获取键值：localStorage.getItem(key)")]),t._v(" "),n("p",[t._v("获取键值："),n("code",[t._v("localStorage.getItem(key)")]),t._v("\ngetItem 用于获取键 key 对应的数据，和 setItem 一样，getItem 也有两种等效形式\n"),n("code",[t._v("value = localStorage.key和 value = localStorage['key']")]),t._v("。\n获取到的 value 值是字符串类型，如果需要其他类型，要做手动的类型转换。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取存储到 name 的键上的值")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// var name = localStorage.name;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// var name = localStorage['name'];")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取存储到user的键上的值")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-3-删除键值对-localstorage-removeitem-key"}},[t._v("5.6.3 删除键值对: localStorage.removeItem(key)")]),t._v(" "),n("p",[t._v("删除键值对："),n("code",[t._v("localStorage.removeItem(key)")]),t._v(" removeItem 用于删除指定键的项，\nlocalStorage "),n("code",[t._v("没有数据过期")]),t._v("的概念，所有数据如果失效了，需要开发者手动删除。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'lilei'")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除存储到 name 的键上的值")]),t._v("\n localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// null")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-4-清除所有键值对-localstorage-clear"}},[t._v("5.6.4 清除所有键值对: localStorage.clear()")]),t._v(" "),n("p",[t._v("清除所有键值对：localStorage.clear()clear 用于删除所有存储的内容，\n它和 removeItem不同的地方是 removeItem 删除的是某一项，而clear是删除所有。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清除 localStorage")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-5-获取-localstorage-的属性名称-键名称-localstorage-key-index"}},[t._v("5.6.5 获取 localStorage 的属性名称(键名称)：localStorage.key(index)")]),t._v(" "),n("p",[t._v("获取 localStorage 的属性名称(键名称)：localStorage.key(index)key 方法用于获取指定索引的键名称。需要注意的是"),n("code",[t._v("赋值早的键值对应的索引值大，赋值晚的键值对应的索引小,")]),t._v(" key方法可用于遍历 localStorage 存储的键值。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lilei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" key "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'name'")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nkey "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'age'")]),t._v("\nkey "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'name'")]),t._v("\n")])])]),n("h4",{attrs:{id:"_5-6-6-获取-localstorage-中保存的键值对的数量-localstorage-length"}},[t._v("5.6.6 获取 localStorage 中保存的键值对的数量：localStorage.length")]),t._v(" "),n("p",[t._v("获取 localStorage 中保存的键值对的数量：localStorage.length length 属性用于获取 localStorage 中键值对的数量。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lilei'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\nlocalStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlen "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n")])])]),n("h3",{attrs:{id:"_5-7-🚥web-storage-事件"}},[t._v("5.7 🚥Web Storage 事件")]),t._v(" "),n("p",[n("code",[t._v("storage 事件当存储的数据发生变化时，会触发 storage 事件")]),t._v("。\n但要注意的是它不同于click类的事件会"),n("code",[t._v("事件捕获和冒泡")]),t._v("，"),n("code",[t._v("storage 事件更像是一个通知，不可取消。")]),t._v("\n触发这个事件会调用"),n("code",[t._v("同域")]),t._v("下其他窗口的storage事件，不过触发"),n("code",[t._v("storage的窗口（即当前窗口）不触发这个事件(chrome 好像可以❤️)")]),t._v(" "),n("code",[t._v("🚥(可用于多页面通信)")]),t._v("storage 的 "),n("code",[t._v("event")]),t._v(" 对象的常用属性如下：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("oldValue：更新前的值。如果该键为新增加，则这个属性为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("。\nnewValue：更新后的值。如果该键被删除，则这个属性为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("。\nurl：原始触发storage事件的那个网页的网址。\nkey：存储 store的 key名\n")])])]),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("storageChanged")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*event */")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nwindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'storage'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" storageChanged"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_5-8-indexdb"}},[t._v("5.8 indexDb")]),t._v(" "),n("blockquote",[n("p",[t._v("IndexedDB 可以存储非常多的数据，比如 Object,files,blobs 等，里面的存储结构是根据 Database 来进行存储的。每个 DB 里面可以有不同的 object stores。")])]),t._v(" "),n("ol",[n("li",[t._v("持久存储")]),t._v(" "),n("li",[t._v("不适合过大的数据存储，浏览器对 indexDB 有 50M 大小的限制")]),t._v(" "),n("li",[t._v("不适合对兼容性要求高的项目")]),t._v(" "),n("li",[t._v("不适合存储敏感数据")]),t._v(" "),n("li",[t._v("当用户清除浏览器缓存的时候可能出现问题")]),t._v(" "),n("li",[t._v("indexedDB 受到同源策略的限制")])]),t._v(" "),n("h2",{attrs:{id:"_6-浏览器从输入url-到页面展示都发生了什么"}},[t._v("6. 浏览器从输入URL 到页面展示都发生了什么")]),t._v(" "),n("p",[n("img",{attrs:{src:a(202),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_6-1-核心"}},[t._v("6.1 核心")]),t._v(" "),n("p",[n("img",{attrs:{src:a(203),alt:"Alt text"}})]),t._v(" "),n("blockquote",[n("p",[t._v("概述")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v("浏览器查找域名的 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v(" 地址\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("这一步包括 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DNS")]),t._v(" 具体的查找过程，包括：浏览器缓存"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("系统缓存"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("路由器缓存"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v(" 根服务器"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("找到指定Ip\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),t._v("浏览器向 web 服务器发送一个 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" 请求\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.")]),t._v("服务器的永久重定向响应（从 http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com 到 http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com）\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.")]),t._v("浏览器跟踪重定向地址\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.")]),t._v("服务器处理请求\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.")]),t._v("服务器返回一个 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v(" 响应\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.")]),t._v("浏览器显示 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTML")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.")]),t._v("浏览器发送请求获取嵌入在 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTML")]),t._v(" 中的资源（如图片、音频、视频、"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CSS")]),t._v("、"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JS")]),t._v("等等）\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.")]),t._v("浏览器发送异步请求\n\n")])])]),n("h3",{attrs:{id:"_6-2-dns-ip"}},[t._v("6.2 DNS && IP")]),t._v(" "),n("ol",[n("li",[t._v("查询 域名")]),t._v(" "),n("li",[t._v("浏览器缓存")]),t._v(" "),n("li",[t._v("系统缓存")]),t._v(" "),n("li",[t._v("路由器缓存")]),t._v(" "),n("li",[t._v("域名服务器")]),t._v(" "),n("li",[t._v("找到指定Ip")])]),t._v(" "),n("h3",{attrs:{id:"_6-3-发送-http-请求"}},[t._v("6.3 发送 HTTP 请求")]),t._v(" "),n("ol",[n("li",[t._v("三次握手")]),t._v(" "),n("li",[t._v("建立连接")]),t._v(" "),n("li",[t._v("正常数据交换")])]),t._v(" "),n("h3",{attrs:{id:"_6-4-资源解析"}},[t._v("6.4 资源解析")]),t._v(" "),n("p",[t._v("HTTP 请求返回的 HTML 传递到浏览器后，如果有 gzip 会先解压，然后接下来最重要的问题是要知道它的编码是什么，比如同样一个「中」字，在 UTF-8 编码下它的内容其实是「11100100 10111000 10101101」也就是「E4 B8 AD」，而在 GBK 下则是「11010110 11010000」，也就是「D6 D0」，如何才能知道文件的编码？可以有很多判断方法：")]),t._v(" "),n("ol",[n("li",[t._v("用户设置，在浏览器中可以指定页面编码")]),t._v(" "),n("li",[t._v("HTTP 协议中")]),t._v(" "),n("li",[n("code",[t._v("<meta>")]),t._v("中的 charset 属性值")]),t._v(" "),n("li",[t._v("对于 JS 和 CSS")]),t._v(" "),n("li",[t._v("对于 iframe")])]),t._v(" "),n("p",[t._v("如果在这些地方都没指明，浏览器就很难处理，在它看来就是一堆「0」和「1」，比如「中文」，它在 UTF-8 下有 6 个字节，如果按照 GBK 可以当成「涓枃」这 3 个汉字来解释，浏览器怎么知道到底是「中文」还是「涓枃」呢？")]),t._v(" "),n("p",[t._v("不过正常人一眼就能认出「涓枃」是错的，因为这 3 个字太不常见了，所以有人就想到通过判断常见字的方法来检测编码，典型的比如 Mozilla 的 UniversalCharsetDetection，不过这东东误判率也很高，所以还是指明编码的好。")]),t._v(" "),n("p",[t._v("这样后续对文本的操作就是基于「字符」(Character)的了，一个汉字就是一个字符，不用再关心它究竟是 2 个字节还是 3 个字节。")]),t._v(" "),n("h3",{attrs:{id:"_6-5-浏览器渲染"}},[t._v("6.5 浏览器渲染")]),t._v(" "),n("ol",[n("li",[t._v("解析 HTML 形成 DOM Tree")]),t._v(" "),n("li",[t._v("解析CSS 形成 CSSOM Tree")]),t._v(" "),n("li",[t._v("DOM  & CSSOM 形成Render Tree")]),t._v(" "),n("li",[t._v("利用 浏览器渲染\b引擎进行渲染")]),t._v(" "),n("li",[t._v("\bPaint 首先进行 \bpaint \b\b(绘制) 根据页面的 DOM 和  CSSOM 进行元素的位置的确定和绘制")]),t._v(" "),n("li",[t._v("\bReflow 进行页面局部位置的回流 主要是颜色 背景边框等视觉因素的样式绘制.")]),t._v(" "),n("li",[t._v("Display 显示整个页面")])]),t._v(" "),n("h2",{attrs:{id:"_7-bom"}},[t._v("7. BOM")]),t._v(" "),n("p",[n("img",{attrs:{src:a(204),alt:"Alt text"}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(205),alt:"Alt text"}})]),t._v(" "),n("blockquote",[n("p",[t._v("BOM 为浏览器窗口对象的一组 API。\n"),n("img",{attrs:{src:a(206),alt:"Alt text"}})])]),t._v(" "),n("h3",{attrs:{id:"_7-1-用于操作浏览器的api"}},[t._v("7.1 "),n("code",[t._v("用于操作浏览器的API")])]),t._v(" "),n("blockquote",[n("p",[t._v("⚠️通过window 或者省略window 或者document 或者 event 鼠标事件")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("是 browser object model的缩写，简称浏览器对象模型\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("提供了独立于内容而与浏览器窗口进行交互的对象\n由于"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("主要用于管理窗口与窗口之间的通讯，因此其核心对象是window\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("由一系列相关的对象构成，并且每个对象都提供了很多方法与属性\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("缺乏标准，JavaScript语法的标准化组织是 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ECMA")]),t._v("，"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v("的标准化组织是 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("W3C")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOM")]),t._v("最初是 Netscape 浏览器标准的一部分\n")])])]),n("h3",{attrs:{id:"_7-2-bom"}},[t._v("7.2 BOM")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("属性\n    navigator\n    location\n方法\n    history\n方法\n    screen\n\nWindow 方法\nWindow 事件\n")])])]),n("ul",[n("li",[t._v("面试🙃🙃")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload 和 document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload 是dom 解析完成就会触发\nwindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onload\n")])])]),n("h3",{attrs:{id:"_7-3-🎉常用api"}},[t._v("7.3 🎉常用API")]),t._v(" "),n("ul",[n("li",[t._v("粗略的过了一遍MDN上的BOM属性，记录部分常用的BOM API")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history\n    操纵浏览器记录\n\n    history"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("back")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于点击浏览器的回退按钮")]),t._v("\n    history"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("go")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//等同于history.back()")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v("🐯 window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("innerWidth vs  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outerWidth"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("outerHeight\n    浏览器窗口的视口（viewport）高宽 vs 获取完整窗口大小：\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),t._v(" 🐯window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location\n    操作刷新按钮和地址栏\n\n    设置或取得当前 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" 的主机名称和端口\n  \n  "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://www.baidu.com:80/qs/ans")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  http://www.baidu.com:80")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    设置或取得当前 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" 的路径部分\n\n🐯"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    查询或设置当前"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("的"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("号开始的字符串\n\n🐯"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href\n    返回整个"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash\n    返回或设置#号开始的部分\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin\n    返回当前域名\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigator\n    只读对象\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screen\n    返回有关屏幕大小宽高以及颜色深度等信息\n\n    screen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("availWidth "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 可用的屏幕宽度\n    screen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("availHeight "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 可用的屏幕宽度\n    screen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("当前屏幕宽度")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("分辨率"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    screen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("当前屏幕高度")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("分辨率值"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    screen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colorDepth "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("当前屏幕色彩深度")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.")]),t._v(" navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userAgent \n    获得"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTTP")]),t._v("请求的用户带头的值\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("self\n    即window 尽量少使用全局变量"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top\n     返回最顶层页面\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resizeTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resizeBy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("增量\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.")]),t._v(" event 事件位置\n\n    参照屏幕左上角"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screenX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screenY\n    参照文档显示区左上角"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y\n    参照所在父元素的左上角"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetX "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetY\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("17.")]),t._v("  location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“url”"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ufeff 当前页面打开不可后退⚠️\n    location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replace vs history"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replaceState⚠️\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.")]),t._v(" ⚠️重新加载当前页面"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" vs location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.")]),t._v("定时器一次性： "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    定时器周期性：  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.")]),t._v(" ️"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("btn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“事件名”，函数对象"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("命名函数"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 匿名函数无法取消会造成泄漏"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("21.")]),t._v(" ️"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("btn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove\ufeff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“事件名”，函数对象"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("命名函数"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 匿名函数无法取消会造成泄漏"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("22.")]),t._v(" 阻止冒泡：\n  e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopPropagation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \ufeffe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cancelBubble"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ie⚠️"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("23.")]),t._v(" 取消事件（阻止默认行为）：\n    e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("preventDefault\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("24.")]),t._v(" 创建cookie"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"变量名=值;expires="')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGMTString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_7-4-location"}},[t._v("7.4 location")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("li"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("xinyang"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("lang"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zh"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CN")]),t._v("#home\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    protocol   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n              hostname     port   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n                \\        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("    pathname             search          hash\n                    host\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("h3",{attrs:{id:"_7-5-window-方法"}},[t._v("7.5 Window 方法")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("方法描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("alert(), confirm() 返回真假, prompt() 返回用户输入值")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("三种对话框")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("setTimeout(), setInterval()")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("计时器")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("open(),")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("close()")])])])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),n("p",[t._v("NOTE："),n("code",[t._v("对话框会阻塞线程。")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("打开或关闭窗口\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" w "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subwindow.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subwin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'width=300, height=300, status=yes, resizable=yes'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 既可关闭窗口")]),t._v("\nw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"_7-6-window-事件"}},[t._v("7.6 Window 事件")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("方法描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("load")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("文档和所有图片完成加载时")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("unload")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("离开当前文档时")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("beforeunload")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("和 unload 类似，但是它提供询问用户是否确认离开的机会")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("resize")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("拖动改变浏览器窗口大小时")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("scroll")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("拖动浏览器时")])])])]),t._v(" "),n("h3",{attrs:{id:"_7-7-浏览器事件"}},[t._v("7.7 浏览器事件")]),t._v(" "),n("p",[n("img",{attrs:{src:a(207),alt:"Alt text"}})]),t._v(" "),n("p",[n("strong",[t._v("专用事件：")]),t._v(" "),n("code",[t._v("window对象-事件")])]),t._v(" "),n("p",[n("code",[t._v("onload")]),t._v("事件：我们需要在网页文档"),n("code",[t._v("下载完毕(所有资源)")]),t._v("时执行的程序代码，需要放在onload事件处理程序中去编写。")]),t._v(" "),n("p",[n("code",[t._v("onunload")]),t._v("事件：在网页文档"),n("code",[t._v("卸载")]),t._v("完毕后，需要在"),n("code",[t._v("网页关闭时执行")]),t._v("的程序代码，需要放在onunload事件处理程序中去编写。")]),t._v(" "),n("p",[n("code",[t._v("onbeforeunload")]),t._v("事件：对于浏览器准备卸载网页文件时的事件，也就是onbeforeunload事件是发生在卸载网页文件之前的事件，给用户提供一个取消的机会。")]),t._v(" "),n("p",[t._v("样例：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body onload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alert('欢迎')\"")]),t._v(" onunload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alert('再见!')\"")]),t._v("  onbeforeunload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"window.event.returnValue='请小心'\"")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("效果：打开网页，弹出一个“欢迎”的对话框，点击右上角的叉叉，弹出是否关闭网页的对话框，选择“确定”，网页关闭，弹出一个“再见”的对话框。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 测试javascript语句的执行顺序：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body onload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alert('欢迎')\"")]),t._v(" onunload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alert('再见!')\"")]),t._v("\n    onbeforeunload"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"window.event.returnValue='请小心'\"")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nHello\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("这个例子说明了，解析器是"),n("code",[t._v("一边读文档")]),t._v("，"),n("code",[t._v("一边解析里面的内容")]),t._v("。而"),n("code",[t._v("onload事件发生在浏览器将程序装载完才发生")]),t._v("的事件。\n如果网页文档非常大，装载的时间非常长，为了缓解用户等待的焦急心情，可以在开始放一个"),n("code",[t._v("script")]),t._v("语句块，显示"),n("code",[t._v('"正在下载"')]),t._v("，然后在中间的"),n("code",[t._v("script语句块中放一个定时器，显示下载进度")]),t._v("。在最后显示装在完毕的信息。")]),t._v(" "),n("p",[n("strong",[t._v("通用事件：")]),t._v(" "),n("code",[t._v("鼠标和按键")])]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("onclick事件")]),t._v("：它是当用户"),n("code",[t._v("点击某个Html元素时产生的事件")]),t._v("。我们在 form表单的元素中经常使用到 onclick事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onmousemove")]),t._v("事件：它是当鼠标在"),n("code",[t._v("某个html元素上移动")]),t._v("的时候所产生的事件，这个事件伴随着鼠标的移动而不断的重复发生。如果我们要随着鼠标的移动而不断显示出鼠标的新坐标位置，就应该处理这个事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onmouseover事件")]),t._v("：它是指鼠标刚从外面移"),n("code",[t._v("进到一个html元素的边界")]),t._v("时，所产生的事件。除非鼠标又移出html元素且再移入，否则这个事件不会重复发生。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onmouseout事件")]),t._v("：它是"),n("code",[t._v("当鼠标移出一个html元素的边界时")]),t._v("所产生的事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onmousedown事件")]),t._v("：当"),n("code",[t._v("鼠标的任何按键按下去")]),t._v("的时候产生的事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onmouseup事件")]),t._v("：当"),n("code",[t._v("鼠标的任何按键弹起去")]),t._v("的时候产生的事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onkeydown")]),t._v("：当键盘的任何按键"),n("code",[t._v("按下")]),t._v("去的时候产生的事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onkeyup事件")]),t._v("：当键盘的"),n("code",[t._v("任何按键弹起的时候")]),t._v("产生的事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("onkeypress事件")]),t._v("：当用户"),n("code",[t._v("按下一个数字或字母按键")]),t._v("所产生的事件。"),n("code",[t._v('按某个键是指"按下弹起"。')])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("TBD....")])])])]),t._v(" "),n("h2",{attrs:{id:"_8-浏览器-gc-垃圾回收"}},[t._v("8. 浏览器 GC (垃圾回收)")]),t._v(" "),n("p",[n("img",{attrs:{src:a(208),alt:"Alt text"}})]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.im/post/5865061e128fe1006d13043f",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接 劼哥stone"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("《JavaScript 闯关记》之垃圾回收和内存管理\nJavaScript 具有自动垃圾收集机制（GC：Garbage Collection），也就是说，执行环境会负责管理代码执行过程中使用的内存。而在 C 和 C++ 之类的语言中，开发人员的一项基本任务就是手工跟踪内存的使用情况，这是造成许多问题的一个根源。")]),t._v(" "),n("p",[t._v("在编写 JavaScript 程序时，开发人员不用再关心内存使用问题，所需内存的分配以及无用内存的回收完全实现了自动管理。这种垃圾收集机制的原理其实很简单："),n("code",[t._v("找出那些不再继续使用的变量，然后释放其占用的内存。")]),t._v("为此，垃圾收集器会按照固定的时间间隔（或代码执行中预定的收集时间），周期性地执行这一操作。")]),t._v(" "),n("p",[t._v("正因为垃圾回收器的存在，许多人认为 JavaScript 不用太关心内存管理的问题，但如果不了解 JavaScript 的内存管理机制，我们同样非常容易成内存泄漏（内存无法被回收）的情况。")])]),t._v(" "),n("h3",{attrs:{id:"_8-1-垃圾回收机制"}},[t._v("8.1 垃圾回收机制")]),t._v(" "),n("ol",[n("li",[t._v("内存的分配场景")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.对象")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyConstructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("数组")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.数组")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("字符串")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.字符串，JavaScript 的字符串和 .NET 一样，使用资源池和 copy on write 方式管理字符串。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello hyddd"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<p>"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"</p>"')]),t._v("\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("函数")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("x")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Function")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ol",{attrs:{start:"5"}},[n("li",[t._v("闭包")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5.闭包")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("outer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("inner")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" name\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_8-2-内存的生命周期"}},[t._v("8.2 内存的生命周期")]),t._v(" "),n("p",[t._v("下面我们来分析一下函数中局部变量的正常生命周期。")]),t._v(" "),n("ul",[n("li",[t._v("内存分配：局部变量只在函数执行的过程中存在。而在这个过程中，会为局部变量在栈（或堆）内存上分配相应的空间，以便存储它们的值。")]),t._v(" "),n("li",[t._v("内存使用：然后在函数中使用这些变量，直至函数执行结束。")]),t._v(" "),n("li",[t._v("内存回收：此时，局部变量就没有存在的必要了，因此可以释放它们的内存以供将来使用。")])]),t._v(" "),n("p",[t._v("通常，很容易判断变量是否还有存在的必要，但并非所有情况下都这么容易就能得出结论（例如：使用闭包的时）。垃圾收集器必须跟踪哪个变量有用哪个变量没用，对于不再有用的变量打上标记，以备将来收回其占用的内存。用于标识无用变量的策略可能会因实现而异，但具体到浏览器中的实现，则通常有两个策略：标记清除 和 引用计数。")]),t._v(" "),n("h3",{attrs:{id:"_8-3-内存回收"}},[t._v("8.3 内存回收")]),t._v(" "),n("h4",{attrs:{id:"_8-3-1-标记清除"}},[t._v("8.3.1 标记清除")]),t._v(" "),n("p",[t._v("JavaScript 中最常用的垃圾收集方式是 "),n("code",[t._v("标记清除（mark-and-sweep")]),t._v("）。当变量进入环境（例如，在函数中声明一个变量）时，就将这个变量标记为"),n("code",[t._v("“进入环境”")]),t._v("。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到它们。而当变量离开环境时，则将其标记为"),n("code",[t._v("“离开环境”")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 被标记 ，进入环境 ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 被标记 ，进入环境 ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行完毕 之后 a、b又被标离开环境，被回收")]),t._v("\n")])])]),n("p",[t._v("垃圾回收器在运行的时候会给"),n("code",[t._v("存储在内存中的所有变量都加上标记")]),t._v("（当然，可以使用任何标记方式）。然后，"),n("code",[t._v("它会去掉环境中的变量以及被环境中的变量引用的变量的标记")]),t._v("（例如，闭包）。而在此之后再被加上标记的变量将被视为准备删除的变量，"),n("code",[t._v("原因是环境中的变量已经无法访问到这些变量了")]),t._v("。最后，"),n("code",[t._v("垃圾回收器完成内存清除工作，销毁那些带标记的值并回收它们所占用的内存空间")]),t._v("。")]),t._v(" "),n("p",[t._v("这种方式的主要缺点就是"),n("code",[t._v("如果某些对象被清理后，内存是不连续的，那么就算内存占用率不高，例如只有50%，但是由于内存空隙太多，后来的大对象甚至无法存储到内存之中。")]),t._v("一般的处理方式都是在垃圾回收后进行整理操作，这种方法也叫 标记整理，整理的过程就是将不连续的内存向一端复制，使不连续的内存连续起来。")]),t._v(" "),n("p",[t._v("目前，IE9+、Firefox、Opera、Chrome 和 Safari 的 JavaScript 实现使用的都是 标记清除 式的垃圾收集策略（或类似的策略），只不过垃圾收集的时间间隔互有不同。")]),t._v(" "),n("h4",{attrs:{id:"_8-3-2-引用计数"}},[t._v("8.3.2 引用计数")]),t._v(" "),n("p",[t._v("另一种不太常见的垃圾收集策略叫做 "),n("code",[t._v("引用计数（reference counting")]),t._v("）。引用计数的含义是跟踪记录每个值被引用的次数。"),n("code",[t._v("当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是1。如果同一个值又被赋给另一个变量，则该值的引用次数加1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减1。当这个值的引用次数变成0时，则说明没有办法再访问这个值了，因而就可以将其占用的内存空间回收回来。")]),t._v("这样，当垃圾收集器下次再运行时，它就会释放那些引用次数为零的值所占用的内存。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用次数为0 ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用次数加1，为1 ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用次数再加1，为2 ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a的引用次数减1，为1 ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("早期很多浏览器使用引用计数策略，但很快它就遇到了一个严重的问题：循环引用。循环引用指的是对象 A 中包含一个指向对象 B 的指针，而对象 B 中也包含一个指向对象 A 的引用。请看下面这个例子：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("problem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" objectA "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" objectB "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    objectA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someOtherObject "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" objectB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    objectB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("anotherObject "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" objectA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在这个例子中，objectA 和 objectB 通过各自的属性相互引用；也就是说，这两个对象的引用次数都是2。在采用 标记清除 策略的实现中，由于函数执行之后，这两个对象都离开了作用域，因此这种相互引用不是个问题。但在采用 引用计数 策略的实现中，当函数执行完毕后，objectA 和 objectB 还将继续存在，因为它们的引用次数永远不会是0。假如这个函数被重复多次调用，就会导致大量内存得不到回收。为此，新一代浏览器都放弃了引用计数方式，转而采用标记清除来实现其垃圾收集机制。可是，引用计数导致的麻烦并未就此终结。")]),t._v(" "),n("p",[t._v("我们知道，IE 中有一部分对象并不是原生 JavaScript 对象。例如，其 BOM 和 DOM 中的对象就是使用 C++ 以 COM（Component Object Model，组件对象模型）对象的形式实现的，而 COM 对象的垃圾收集机制采用的就是引用计数策略。因此，即使 IE 的 JavaScript 引擎是使用标记清除策略来实现的，但 JavaScript 访问的 COM 对象依然是基于引用计数策略的。换句话说，只要在 IE 中涉及 COM 对象，就会存在循环引用的问题。下面这个简单的例子，展示了使用 COM 对象导致的循环引用问题：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" element "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some_element"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myObject "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmyObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("element "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someObject "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" myObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这个例子在一个 DOM 元素（element）与一个原生 JavaScript 对象（myObject）之间创建了循环引用。其中，变量 myObject 有一个名为 element 的属性指向 element 对象；而变量 element 也有一个属性名叫 someObject 回指 myObject。由于存在这个循环引用，即使将例子中的 DOM 从页面中移除，它也永远不会被回收。")]),t._v(" "),n("p",[t._v("为了避免类似这样的循环引用问题，最好是在不使用它们的时候手工断开原生 JavaScript 对象与 DOM 元素之间的连接。例如，可以使用下面的代码消除前面例子创建的循环引用：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("myObject"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("element "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someObject "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n")])])]),n("p",[t._v("将变量设置为 null 意味着切断变量与它此前引用的值之间的连接。当垃圾收集器下次运行时，就会删除这些值并回收它们占用的内存。")]),t._v(" "),n("p",[t._v("为了解决上述问题，IE9 把 BOM 和 DOM 对象都转换成了真正的 JavaScript 对象。这样，就避免了两种垃圾收集算法并存导致的问题，也消除了常见的内存泄漏现象。")]),t._v(" "),n("h4",{attrs:{id:"_8-3-3-ie6-的性能问题"}},[t._v("8.3.3 IE6 的性能问题")]),t._v(" "),n("p",[t._v("IE6 的垃圾回收是根据内存分配量运行的，当环境中存在256个变量、4096个对象、64k的字符串任意一种情况的时候就会触发垃圾回收器工作，看起来很科学，不用按一段时间就调用一次，有时候会没必要，这样按需调用不是很好吗？但是如果环境中就是有这么多变量等一直存在，现在脚本如此复杂，那么垃圾回收器会一直工作，这样浏览器就没法儿玩儿了。")]),t._v(" "),n("p",[t._v("微软在 IE7 中做了调整，触发条件不再是固定的，而是动态修改的，初始值和 IE6 相同，如果垃圾回收器回收的内存分配量低于程序占用内存的15%，说明大部分内存不可被回收，设的垃圾回收触发条件过于敏感，这时候把临界条件翻倍，如果回收的内存高于85%，说明大部分内存早就该清理了，这时候则将各种临界值重置回默认值。这一看似简单的调整，极大地提升了 IE7 在运行包含大量 JavaScript 的页面时的性能。")]),t._v(" "),n("h4",{attrs:{id:"_8-3-4-编码注意-解除引用"}},[t._v("8.3.4 编码注意 - 解除引用")]),t._v(" "),n("p",[t._v("使用具备垃圾收集机制的语言编写程序，开发人员一般不必操心内存管理的问题。但是，JavaScript 在进行内存管理及垃圾收集时面临的问题还是有点与众不同。其中最主要的一个问题，就是分配给 Web 浏览器的可用内存数量通常要比分配给桌面应用程序的少。这样做的目的主要是出于安全方面的考虑，目的是防止运行 JavaScript 的网页耗尽全部系统内存而导致系统崩溃。内存限制问题不仅会影响给变量分配内存，同时还会影响调用栈以及在一个线程中能够同时执行的语句数量。")]),t._v(" "),n("p",[t._v("因此，确保占用最少的内存可以让页面获得更好的性能。而"),n("code",[t._v("优化内存占用的最佳方式，就是为执行中的代码只保存必要的数据。一旦数据不再有用，最好通过将其值设置为 null 来释放其引用——这个做法叫做 解除引用（dereferencing）。")]),t._v("这一做法适用于大多数全局变量和全局对象的属性。局部变量会在它们离开执行环境时自动被解除引用，如下面这个例子所示：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPerson")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" localPerson "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    localPerson"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" localPerson"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" globalPerson "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPerson")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Nicholas"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手工解除globalPerson的引用")]),t._v("\nglobalPerson "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("由于局部变量 localPerson 在 createPerson() 函数执行完毕后就离开了其执行环境，\n因此无需我们显式地去为它解除引用。但是对于全局变量 globalPerson 而言，则需要我们在不使用它的时候手工为它解除引用，\n这也正是上面例子中最后一行代码的目的。")]),t._v(" "),n("p",[t._v("不过，解除一个值的引用并不意味着自动回收该值所占用的内存。解除引用的真正作用是让值脱离执行环境，以便垃圾收集器下次运行时将其回收。")]),t._v(" "),n("h4",{attrs:{id:"_8-4-垃圾回收的优化策略"}},[t._v("8.4 垃圾回收的优化策略")]),t._v(" "),n("p",[t._v("和其他语言一样，JavaScript 的垃圾回收策略也无法避免一个问题："),n("code",[t._v("垃圾回收时，会停止响应其他操作")]),t._v("，\n这是为了安全考虑。而 JavaScript 的垃圾回收在 "),n("code",[t._v("100ms")]),t._v(" 甚至以上，对一般的应用还好，但对于 JavaScript 游戏和动画，\n这种对连贯性要求比较高的应用，就麻烦了。这就是新引擎需要优化的点："),n("code",[t._v("避免垃圾回收造成的长时间停止响应")]),t._v("。")]),t._v(" "),n("p",[t._v("David 大叔主要介绍了2个优化方案，而这也是最主要的2个优化方案了：")]),t._v(" "),n("h4",{attrs:{id:"_8-4-1-分代回收-generation-gc"}},[t._v("8.4.1 分代回收（Generation GC）")]),t._v(" "),n("p",[n("img",{attrs:{src:a(209),alt:"Alt text"}})]),t._v(" "),n("p",[t._v("这个和 Java 回收策略思想是一致的。目的是通过区分"),n("code",[t._v("「临时」与「持久」对象")]),t._v("；多回收「临时对象区」（young generation），\n少回收「持久对象区」（tenured generation），减少每次需遍历的对象，从而减少每次GC的耗时。Chrome 浏览器所使用的 V8 引擎就是采用的分代回收策略。如图：")]),t._v(" "),n("h4",{attrs:{id:"_8-4-2-增量回收-incremental-gc"}},[t._v("8.4.2 增量回收（Incremental GC）")]),t._v(" "),n("p",[t._v("这个方案的思想很简单，就是「每次处理一点，下次再处理一点，如此类推」。这种方案，虽然耗时短，但中断较多，带来了上下文切换频繁的问题。\nFirefox 浏览器所使用的 JavaScript 引擎就是采用的增量回收策略。如图：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(210),alt:"Alt text"}})]),t._v(" "),n("p",[t._v("因为每种方案都其适用场景和缺点，因此在实际应用中，会根据实际情况选择方案。例如：如果大量对象都是长期「存活」，则分代处理优势也不大。")]),t._v(" "),n("p",[t._v("查看 Chrome 浏览器下的 CG 过程")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("使用快捷键 F12 或者 Ctrl+Shift+J 打开 Chrome 浏览器的「开发者工具」。\n选择 Timeline 选项卡，在 Capture 选项中，只勾选 Memory。\n设置完成后，点击最左边的 Record 按钮，然后就可以访问网页了。\n")])])]),n("p",[t._v("打开一个网站，例如：www.taobao.com，当网页加载完成后，点击 Stop，等待分析结果。")]),t._v(" "),n("p",[t._v("然后在 Chart View 上寻找内存急速下降的部分，查看对应的 Event Log，可以从中找到 GC 的日志。\n具体过程如下图所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(211),alt:"Alt text"}})]),t._v(" "),n("h2",{attrs:{id:"_9-dom-api"}},[t._v("9. DOM API")]),t._v(" "),n("p",[n("img",{attrs:{src:a(212),alt:"Alt text"}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(213),alt:"Alt text"}})]),t._v(" "),n("h3",{attrs:{id:"_9-1-dom1"}},[t._v("9.1 DOM1")]),t._v(" "),n("ol",[n("li",[t._v("元素节点：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("元素节点element"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("更精确的获得元素的标签名")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("全大写"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n属性节点attribute"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 属性名\n文本节点text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" #text\n注释节点document：#document\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("nodeType: 描述节点对象的类型，值是一个数字")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("element_NODE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nattribute_NODE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\ntext_NODE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\ndocument_NODE"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("\n假设我们要判断一个Node是不是元素，我们可以这样判断\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Node is a element"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("Text类型")])]),t._v(" "),n("p",[t._v("Text表示文本节点，它包含的是纯文本内容，不能包含html代码，但可以包含转义后的html代码。Text有下面的特性：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("nodeType为"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）nodeName为#text\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）nodeValue为文本内容\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("）parentNode是一个Element\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("）没有子节点\n")])])]),n("ul",[n("li",[t._v("2.2 DocumentFragment类型")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("DocumentFragment是所有节点中唯一一个没有对应标记的类型，\n它表示一种轻量级的文档，可能当作一个临时的仓库用来保存可能会添加到文档中的节点。\nDocumentFragment有下面的特性：\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("）nodeType为"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）nodeName为#document"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("fragment\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）nodeValue为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n（"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("）parentNode为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("获取节点名称:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("some"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("节点的值:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nodeValue\ufeff "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("some"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("p",[t._v("5.1 父子关系: parserFloat")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode（父节点"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("childNodes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("所有子节点"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstChild（第一子元素）\nel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastChild（最后一子元素）\n")])])]),n("p",[t._v("5.2 兄弟关系:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("previousSibling（上一个兄弟）\nel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextSibling（下一个兄弟）\n")])])]),n("p",[t._v("5.3 元素树父子关系:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("parentElementNode （父节点）\nfirstElementChild（第一子元素）\nlastElementChild（最后一子元素）\n")])])]),n("p",[t._v("5.4 兄弟关系:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("previousElementSibling（上一个兄弟）\nnextElementSibling （下一个兄弟）\n")])])]),n("ol",{attrs:{start:"6"}},[n("li",[t._v("开始标签到结束标签之间的一切html原文：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("    el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SOMETHING")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string or template or more ")]),t._v("\n")])])]),n("ol",{attrs:{start:"7"}},[n("li",[t._v("获取所有属性的集合:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attributes\ufeff "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ArrayLike"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("ol",{attrs:{start:"8"}},[n("li",[t._v("获得指定属性的值：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"属性名"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"9"}},[n("li",[t._v("设置指定属性的值：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"属性名"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"属性值"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("10 . 移除属性：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"属性名"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"11"}},[n("li",[t._v("获取焦点")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onfocus"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cb"')]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"12"}},[n("li",[t._v("失去焦点")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onblur"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cb"')]),t._v("\n")])])]),n("ol",{attrs:{start:"13"}},[n("li",[t._v("HTML创建元素: 3步:")])]),t._v(" "),n("p",[n("code",[t._v("Step1. 创建空元素对象:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" elem "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"标签名"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n相当于"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("标签名"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n使用createElement要注意：通过createElement创建的元素并不属于html文档，\n它只是创建出来，并未添加到html文档中，要调用appendChild或insertBefore等方法将其添加到"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTML")]),t._v("文档树中。\n")])])]),n("p",[n("code",[t._v("Step2. ⚠️ 为空元素添加关键属性")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("elem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("属性名"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"值"')]),t._v("\nelem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"内容"')]),t._v("\n相当于"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("标签名 属性名"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"值"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("内容\n")])])]),n("p",[n("code",[t._v("Step3. 将新元素挂到DOM树中指定父元素下")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("追加"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n插入"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertBefore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("现有元素"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n替换"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("现有元素"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n删除"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elem"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ol",{attrs:{start:"14"}},[n("li",[t._v("🐯查找所有符合条件")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" elems"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"以CSS的命名方式"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"15"}},[n("li",[t._v("🐯只查找一个符合条件的元素:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" el"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("docuemnt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"以CSS的命名方式"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ufeff\n必须。指定一个或多个匹配元素的 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CSS")]),t._v(" 选择器。 可以使用它们的 id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 类型"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 属性"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 属性值等来选取元素。 \n对于多个选择器，使用逗号隔开，返回一个匹配的元素。\n")])])]),n("ol",{attrs:{start:"16"}},[n("li",[t._v("脱掉衣服 [ 去除class ]")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("txt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"17"}},[n("li",[t._v("创建Option:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("sel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Option")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("innerHTML"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ufeff\n")])])]),n("ol",{attrs:{start:"18"}},[n("li",[t._v("Table:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("创建"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" createTHead"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("TBody"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("TFoot\n删除"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" deleteTHead"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("TFoot\n获取"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tHead"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tFoot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tBodies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n添加"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insertRow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Cell")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n删除"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deleteRow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Cell")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ol",{attrs:{start:"19"}},[n("li",[t._v("Form:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("获取："),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" form"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("form"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n获得表单元素：form"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elements"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n当提交前触发：onsubmit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",{attrs:{start:"20"}},[n("li",[t._v("createTextNode用来创建一个文本节点，用法如下：")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" textNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"一个TextNode"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n同样需要appendChild将其添加到"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HTML")]),t._v("文档树中\n")])])]),n("ol",{attrs:{start:"21"}},[n("li",[t._v("cloneNode⚠️🐯")])]),t._v(" "),n("p",[t._v("cloneNode是用来返回调用方法的节点的一个副本，⚠️它接收一个bool参数，用来表示是否复制子元素，使用如下：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" parent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parentElement"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" parent2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cloneNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传入true")]),t._v("\nparent2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parent2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("⚠️⚠️⚠️ 这段代码很简单，主要是绑定button事件，事件内容是复制了一个parent，修改其id，然后添加到文档中。\n这里有几点要注意：")])]),t._v(" "),n("p",[t._v("（1）和createElement一样，cloneNode创建的节点只是游离有html文档外的节点，\n要调用appendChild方法才能添加到文档树中\n（2）如果复制的元素有id，则其副本同样会包含该id，由于id具有唯一性，所以在复制节点后必须要修改其id\n（3）调用接收的bool参数最好传入，如果不传入该参数，不同浏览器对其默认值的处理可能不同")]),t._v(" "),n("p",[t._v("除此之外，我们还有一个需要注意的点：\n如果被复制的节点绑定了事件，则副本也会跟着绑定该事件吗？这里要分情况讨论：")]),t._v(" "),n("p",[t._v("（1）如果是通过addEventListener或者比如onclick进行绑定事件，则副本节点不会绑定该事件\n（2）如果是内联方式绑定比如")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onclick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"showParent()"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("这样的话，副本节点同样会触发事件。")]),t._v(" "),n("ol",{attrs:{start:"22"}},[n("li",[t._v("🐯🐯🐯 createDocumentFragment")])]),t._v(" "),n("p",[t._v("createDocumentFragment方法用来创建一个DocumentFragment。\n在前面我们说到DocumentFragment表示一种轻量级的文档，\n它的作用主要是存储临时的节点用来准备添加到文档中。\ncreateDocumentFragment方法主要是用于添加大量节点到文档中时会使用到。\n假设要循环一组数据，然后创建多个节点添加到文档中，比如示例")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ul id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ul"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"添加多项"')]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btnAdd"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n⚠️document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btnAdd"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" li "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这段代码将按钮绑定了一个事件，这个事件创建了100个li节点，然后依次将其添加HTML文档中。\n这样做有一个缺点：\n每次一创建一个新的元素，然后添加到文档树中，⚠️这个过程会造成浏览器的回流。\n所谓回流简单说就是指元素大小和位置会被重新计算，\n如果添加的元素太多，会造成性能问题。这个时候，就是使用createDocumentFragment了。\nDocumentFragment不是文档树的一部分，它是保存在内存中的，所以不会造成回流问题。我们修改上面的代码如下：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("🎉\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"btnAdd"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fragment "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" li "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        fragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("优化后的代码主要是创建了一个fragment，每次生成的li节点先添加到fragment，\n最后一次性添加到list，大家可以看示例xxxxxxxxxx")]),t._v(" "),n("ol",{attrs:{start:"23"}},[n("li",[t._v("创建型API总结 🐯🙃🏃🎉⚠️")])]),t._v(" "),n("p",[t._v("创建型api主要包括createElement，createTextNode，\ncloneNode和createDocumentFragment四个方法，需要注意下面几点：\n（1）它们创建的节点只是一个孤立的节点，要通过appendChild添加到文档中\n（2）cloneNode要注意如果被复制的节点是否包含子节点以及事件绑定等问题\n（3）使用createDocumentFragment来解决添加大量节点时的性能问题")]),t._v(" "),n("h3",{attrs:{id:"_9-2-dom-2"}},[t._v("9.2 DOM 2")]),t._v(" "),n("ol",[n("li",[t._v("页面修改型API "),n("code",[t._v("[⚠️parent]修改页面内容的api主要包括：appendChild，insertBefore，removeChild，replaceChild。")])])]),t._v(" "),n("p",[t._v("修改页面内容的api主要包括：appendChild，insertBefore，removeChild，replaceChild。")]),t._v(" "),n("p",[t._v("页面修改型api主要是这四个接口，要注意几个特点：")]),t._v(" "),n("p",[t._v("（1）不管是新增还是替换节点，如果新增或替换的节点是原本存在页面上的，\n则其原来位置的节点将被移除，也就是说同一个节点不能存在于页面的多个位置")]),t._v(" "),n("p",[t._v("（2）节点本身绑定的事件会不会消失，会一直保留着。⚠️⚠️⚠️")]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("🎉appendChild⚠️")])]),t._v(" "),n("p",[t._v("appendChild我们在前面已经用到多次，就是将指定的节点添加到调用该方法的节点的子元素的末尾。\n调用方法如下： parent.appendChild(child);")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("🎉insertBefore⚠️")])]),t._v(" "),n("p",[t._v("insertBefore用来添加一个节点到一个参照节点之前，用法如下：\nparentNode.insertBefore(newNode,refNode);\n这段代码创建了一个新节点，然后添加到child节点之前。\n和appendChild一样，如果插入的节点是页面上的节点，则会移动该节点到指定位置，并且保留其绑定的事件。")]),t._v(" "),n("p",[t._v("关于第二个参数参照节点还有几个注意的地方：\n（1）refNode是必传的，如果不传该参数会报错\n（2）如果refNode是undefined或null，则insertBefore会将节点添加到子元素的末尾")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("🎉removeChild")])]),t._v(" "),n("p",[t._v("removeChild顾名思义，就是删除指定的子节点并返回⚠️，用法如下：")]),t._v(" "),n("p",[t._v("var deletedChild = parent.removeChild(node);\ndeletedChild指向被删除节点的引用，它等于node，被删除的节点仍然存在于内存中，可以对其进行下一步操作。\n注意：如果被删除的节点不是其子节点，则程序将会报错。我们可以通过下面的方式来确保可以删除：\n通过节点自己获取节点的父节点，然后将自身删除。\nif(node.parentNode){\nnode.parentNode.removeChild(node);\n}")]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("🎉replaceChild")])]),t._v(" "),n("p",[t._v("replaceChild用于使用一个节点替换另一个节点，用法如下")]),t._v(" "),n("p",[t._v("parent.replaceChild(newChild,oldChild);\nnewChild是替换的节点，可以是新的节点，也可以是页面上的节点，如果是页面上的节点，则其将被转移到新的位置\noldChild是被替换的节点")]),t._v(" "),n("h3",{attrs:{id:"_9-3-dom-3"}},[t._v("9.3 DOM 3")]),t._v(" "),n("p",[n("code",[t._v("节点查询型API也是非常常用的api，下面我们分别说明一下每一个api的使用")])]),t._v(" "),n("ol",[n("li",[t._v("🏃 document.getElementById")])]),t._v(" "),n("p",[t._v("这个接口很简单，根据元素id返回元素，返回值是Element类型，如果不存在该元素，则返回null。\n使用这个接口有几点要注意：\n（1）元素的Id是大小写敏感的，一定要写对元素的id\n（2）HTML文档中可能存在多个id相同的元素，则返回第一个元素\n（3）只从文档中进行搜索元素，如果创建了一个元素并指定id，但并没有添加到文档中，\n则这个元素是不会被查找到的⚠️")]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("🏃  document.getElementsByTagName ⚠️"),n("code",[t._v("HTMLCollcetion")])])]),t._v(" "),n("p",[t._v("这个接口根据元素标签名获取元素，返回一个即时的HTMLCollection类型，\n什么是即时的HTMLCollection类型呢？\n前面提到⚠️"),n("code",[t._v("HTMLCollcetion")]),t._v("元素是即时的表示该集合是随时变化的，\n也就是是文档中有几个div，它会随时进行变化，当我们新增一个div后，\n再访问HTMLCollection时，就会包含这个新增的div。\n使用document.getElementsByTagName这个方法有几点要注意：\n（1）如果要对HTMLCollection集合进行循环操作，最好将其长度缓存起来，\n因为每次循环都会去计算长度，暂时缓存起来可以提高效率⚠️\n（2）如果没有存在指定的标签，该接口返回的不是null，而是一个空的HTMLCollection\n（3）“*”表示所有标签⚠️")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("🏃document.getElementsByName")])]),t._v(" "),n("p",[t._v("getElementsByName主要是通过指定的name属性来获取元素，它返回一个即时的NodeList对象。\n使用这个接口主要要注意几点：\n（1）返回对象是一个即时的NodeList，它是随时变化的\n（2）在HTML元素中，并不是所有元素都有name属性，\n比如div是没有name属性的，但是如果强制设置div的name属性，\n它也是可以被查找到的\n（3）在IE中，如果id设置成某个值，然后传入getElementsByName的参数值和id值一样，\n则这个元素是会被找到的，所以最好不好设置同样的值给id和name")]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("🏃 document.getElementsByClassName")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("这个"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v("是根据元素的"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v("返回一个即时的HTMLCollection，"),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("用法如下")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" elements "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByClassName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("names"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这个接口有下面几点要注意：\n（1）返回结果是一个即时的HTMLCollection，会随时根据文档结构变化\n（2）IE9以下浏览器不支持\n（3）如果要获取2个以上 classname，可传入多个 classname，每个用空格相隔，例如⚠️")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" elements "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementsByClassName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test1 test2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",{attrs:{start:"5"}},[n("li",[t._v("🏃  document.querySelector和document.querySelectorAll")])]),t._v(" "),n("p",[t._v("这两个api很相似，通过css选择器来查找元素，注意选择器要符合CSS选择器的规则。")]),t._v(" "),n("blockquote",[n("p",[t._v("首先来介绍一下document.querySelector。\ndocument.querySelector返回第一个匹配的元素，如果没有匹配的元素，则返回null。\n注意，由于返回的是第一个匹配的元素，这个api使用的深度优先搜索来获取元素。我们来看这个例子：这个例子很简单，就是两个class都包含“test”的元素，\n一个在文档树的前面，但是它在第三级，另一个在文档树的后面，但它在第一级，通过querySelector获取元素时⚠️⚠️，它通过深度优先搜索，拿到文档树前面的第三级的元素。\ndocument.querySelectorAll")])]),t._v(" "),n("p",[t._v("document.querySelectorAll的不同之处在于它返回的是所有匹配的元素，而且可以匹配多个选择符，我们来看看下面这个例子这段代码通过querySelectorAll，\n使用id选择器和class选择器选择了两个元素，并依次输出其内容。要注意两点：\n（1）querySelectorAll也是通过深度优先搜索，搜索的元素顺序和选择器的顺序无关\n（2）返回的是一个非即时的NodeList，也就是说结果不会随着文档树的变化而变化 ⚠️⚠️⚠️")]),t._v(" "),n("p",[t._v("兼容性问题：querySelector和querySelectorAll在ie8以下的浏览器不支持。")]),t._v(" "),n("h3",{attrs:{id:"_9-4-dom-节点型查询"}},[t._v("9.4 DOM 节点型查询")]),t._v(" "),n("p",[n("code",[t._v("在html文档中的每个节点之间的关系都可以看成是家谱关系，包含父子关系，兄弟关系等等，下面我们依次来看看每一种关系。")])]),t._v(" "),n("ol",[n("li",[t._v("父关系型api  "),n("code",[t._v("parentNode || parentElement(Parent IS element)")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("parentNode：每个节点都有一个parentNode属性，它表示元素的父节点。Element的父节点可能是Element，Document或DocumentFragment。\n\nparentElement：返回元素的父元素节点，与parentNode的区别在于，⚠️其父节点必须是一个Element，如果不是，则返回"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("兄弟关系型api "),n("code",[t._v("previousSibling || nextSibling")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("previousSibling：节点的前一个节点，如果该节点是第一个节点，则为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("。注意有可能拿到的节点是文本节点或注释节点，与预期的不符，要进行处理一下。\npreviousElementSibling：返回前一个元素节点，前一个节点必须是Element，注意"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IE9")]),t._v("以下浏览器不支持。\n\nnextSibling：节点的后一个节点，如果该节点是最后一个节点，则为"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("。注意有可能拿到的节点是文本节点，与预期的不符，要进行处理一下。\nnextElementSibling：返回后一个元素节点，后一个节点必须是Element，注意"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IE9")]),t._v("以下浏览器不支持。\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("子关系型api:  "),n("code",[t._v("NodeList : childNodes || children || firstNode || lastNode hasChildNodes")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("⚠️⚠️⚠️childNodes：返回一个即时的NodeList⚠️，表示元素的子节点列表，子节点可能会包含文本节点，注释节点等。\n⚠️⚠️⚠️children：一个即时的HTMLCollection，子节点都是Element，"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IE9")]),t._v("以下浏览器不支持。\nfirstNode：第一个子节点\nlastNode：最后一个子节点\nhasChildNodes方法：可以用来判断是否包含子节点。\n")])])]),n("h3",{attrs:{id:"_9-5-dom-节点属性"}},[t._v("9.5 DOM 节点属性")]),t._v(" "),n("ol",[n("li",[t._v("setAttribute "),n("code",[t._v("element.setAttribute(name, value);")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("setAttribute：根据名称和值修改元素的特性，用法如下。\nelement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n其中name是特性名，value是特性值。如果元素不包含该特性，则会创建该特性并赋值。\n如果元素本身包含指定的特性名为属性，则可以世界访问属性进行赋值，比如下面两条代码是等价的：\nelement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nelement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("getAttribute "),n("code",[t._v("getAttribute返回指定的特性名相应的特性值，如果不存在，则返回null或空字符串")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_9-6-dom-节点样式"}},[t._v("9.6 DOM 节点样式")]),t._v(" "),n("ol",[n("li",[t._v("window.getComputedStyle")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getComputedStyle是用来获取应用到元素后的样式，假设某个元素并未设置高度而是通过其内容将其高度撑开，\n这时候要获取它的高度就要用到getComputedStyle，用法如下：\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" style "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getComputedStyle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pseudoElt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nelement是要获取的元素，pseudoElt指定一个伪元素进行匹配。\n返回的style是一个CSSStyleDeclaration对象。\n通过style可以访问到元素计算后的样式\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("getBoundingClientRect "),n("code",[t._v("用来返回元素的大小以及相对于浏览器可视窗口的位置")])])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clientRect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclientRect是一个DOMRect对象，包含left，top，right，bottom，它是相对于可视窗口的距离，滚动位置发生改变时，\n它们的值是会发生变化的。除了"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IE9")]),t._v("以下浏览器，还包含元素的height和width等数据，具体可查看链接\n")])])]),n("h3",{attrs:{id:"_9-7-dom-classname-api-classlist的本质-domtokenlist"}},[t._v("9.7 DOM className Api "),n("code",[t._v("classList的本质-DOMTokenList")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("DOMTokenList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList\n\nlength 属性，表示元素类名的个数，只读 # document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("item")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 支持一个参数，为类名的索引，返回对应的类名 # document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("item")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n如果索引超出范围"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 返回"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 支持一个类名字符串参数。表示往类名列表中新增一个类名；如果之前类名存在，则添加忽略。例如："),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// document.body.classList.add('name')")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 支持一个类名字符串参数。表示往类名列表中移除该类名。\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// document.body.classList.remove('name')")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toggle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 支持一个类名字符串参数。无则加勉，有则移除之意。若类名列表中有此类名，移除之，并返回"),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" 如果没有，则添加该类名，并返回"),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n # document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toggle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true or false")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 支持一个类名字符串参数"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("表示往类名列表中是否包含该类名\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true or false ")]),t._v("\n\n")])])]),n("h2",{attrs:{id:"_10-event-事件"}},[t._v("10. Event 事件")]),t._v(" "),n("p",[n("img",{attrs:{src:a(214),alt:"Alt text"}})]),t._v(" "),n("p",[t._v("JS 事件模型")]),t._v(" "),n("p",[n("a",{attrs:{href:"http://www.segmentfault.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"_10-1-观察者模式"}},[t._v("10.1 观察者模式")]),t._v(" "),n("p",[t._v("观察者模式又叫做发布订阅者模式(Publish/Subscribe)，它可以让多个观察者对象同时监听某一个主题对象，这个主题对象的状态变化时会通知所有的订阅者，使得它们能够做出反应。\nJS的事件模型就是一种观察者模式的体现，当对应的事件被触发时，监听该事件的所有监听函数都会被调用。")]),t._v(" "),n("p",[t._v("下面是用JS实现的一个观察者模式的代码:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" events "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" topics "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("publish")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'publish a topic:'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("info "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" info "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subscribe an topic:'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("remove")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" handlerIndex "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          handlerIndex "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handlerIndex "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handlerIndex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("removeAll")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'remove all the handler on the topic:'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        topics"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[t._v("使用事例:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//主题监听函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handler")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//订阅hello主题")]),t._v("\nevents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发布hello主题")]),t._v("\nevents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("publish")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_10-2-事件与事件流"}},[t._v("10.2 事件与事件流")]),t._v(" "),n("p",[t._v("事件是与浏览器或文档交互的瞬间，如点击按钮，填写表格等，它是JS与HTML之间交互的桥梁。\nDOM是树形结构，如果同时给父子节点都绑定事件时，当触发子节点的时候，这两个事件的发生顺序如何决定?这就涉及到事件流的概念，它描述的是页面中接受事件的顺序。")]),t._v(" "),n("p",[n("code",[t._v("事件流有两种:")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("事件冒泡(Event Capturing): 是一种从下往上的传播方式。事件最开始由最具体的元素(文档中嵌套层次最深的那个节点接受, 也就是DOM最低层的子节点), 然后逐渐向上传播到最不具体的那个节点，也就是DOM中最高层的父节点。")])]),t._v(" "),n("li",[n("p",[t._v("事件捕获(Event Bubbling): 与事件冒泡相反。事件最开始由不太具体的节点最早接受事件, 而最具体的节点最后接受事件。")])])]),t._v(" "),n("p",[n("code",[t._v("事件模型")])]),t._v(" "),n("h3",{attrs:{id:"_10-3-dom-0级模型"}},[t._v("10.3 DOM 0级模型")]),t._v(" "),n("p",[t._v("又称为原始事件模型，在该模型中，事件不会传播，即没有事件流的概念。事件绑定监听函数比较简单, 有两种方式:")]),t._v(" "),n("p",[t._v("HTML代码中直接绑定:")]),t._v(" "),n("p",[t._v("通过JS代码指定属性值:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fun"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("移除监听函数：")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[t._v("  btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这种方式所有浏览器都兼容，但是逻辑与显示并没有分离。")]),t._v(" "),n("h3",{attrs:{id:"_10-4-ie事件模型"}},[t._v("10.4 IE事件模型")]),t._v(" "),n("p",[t._v("IE事件模型共有两个过程:")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("事件处理阶段(target phase)。事件到达目标元素, 触发目标元素的监听函数。")])]),t._v(" "),n("li",[n("p",[t._v("事件冒泡阶段(bubbling phase)。事件从目标元素冒泡到document, 依次检查经过的节点是否绑定了事件监听函数，如果有则执行。")])])]),t._v(" "),n("p",[t._v("事件绑定监听函数的方式如下:")]),t._v(" "),n("p",[n("code",[t._v("attachEvent(eventType, handler)")])]),t._v(" "),n("p",[t._v("事件移除监听函数的方式如下:")]),t._v(" "),n("p",[n("code",[t._v("detachEvent(eventType, handler)")])]),t._v(" "),n("blockquote",[n("p",[t._v("参数说明:")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("eventType指定事件类型")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("注意加on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhandler是事件处理函数\n")])])]),n("p",[t._v("Example:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘onclick’"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" showMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("detachEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘onclick’"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" showMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_10-5-dom2级模型"}},[t._v("10.5 DOM2级模型")]),t._v(" "),n("p",[t._v("属于W3C标准模型，现代浏览器(除IE6-8之外的浏览器)都支持该模型。在该事件模型中，一次事件共有三个过程:")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("事件捕获阶段(capturing phase)。事件从document一直向下传播到目标元素, 依次检查经过的节点是否绑定了事件监听函数，如果有则执行。")])]),t._v(" "),n("li",[n("p",[t._v("事件处理阶段(target phase)。事件到达目标元素, 触发目标元素的监听函数。")])]),t._v(" "),n("li",[n("p",[t._v("事件冒泡阶段(bubbling phase)。事件从目标元素冒泡到document, 依次检查经过的节点是否绑定了事件监听函数，如果有则执行。")])])]),t._v(" "),n("p",[t._v("事件绑定监听函数的方式如下:")]),t._v(" "),n("p",[n("code",[t._v("addEventListener(eventType, handler, useCapture)")]),t._v("\n事件移除监听函数的方式如下:")]),t._v(" "),n("p",[n("code",[t._v("removeEventListener(eventType, handler, useCapture)")]),t._v("\nExample:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.btn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘click’"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" showMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘click’"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" showMessage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("参数说明:")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("eventType指定事件类型(不要加on)")])]),t._v(" "),n("li",[n("p",[t._v("handler是事件处理函数")])]),t._v(" "),n("li",[n("p",[t._v("useCapture是一个boolean用于指定是否在捕获阶段进行处理，一般设置为false与IE浏览器保持一致。")])])]),t._v(" "),n("h3",{attrs:{id:"_10-6-事件对象"}},[t._v("10.6 事件对象")]),t._v(" "),n("blockquote",[n("p",[t._v("当一个事件被触发时，会创建一个事件对象(Event Object), 这个对象里面包含了与该事件相关的属性或者方法。该对象会作为第一个参数传递给监听函数。")])]),t._v(" "),n("ul",[n("li",[t._v("DOM事件模型中的事件对象常用属性:")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("type用于获取事件类型")])]),t._v(" "),n("li",[n("p",[t._v("target获取事件目标")])]),t._v(" "),n("li",[n("p",[t._v("stopPropagation()阻止事件冒泡")])]),t._v(" "),n("li",[n("p",[t._v("preventDefault()阻止事件默认行为")])])]),t._v(" "),n("ul",[n("li",[t._v("IE事件模型中的事件对象常用属性:")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("type用于获取事件类型")])]),t._v(" "),n("li",[n("p",[t._v("srcElement获取事件目标")])]),t._v(" "),n("li",[n("p",[t._v("cancelBubble阻止事件冒泡")])]),t._v(" "),n("li",[n("p",[t._v("returnValue阻止事件默认行为")])])]),t._v(" "),n("h3",{attrs:{id:"_10-7-event-wrapper"}},[t._v("10.7 Event Wrapper")]),t._v(" "),n("p",[t._v("由于事件模型的差异以及Event对象的不同，为了达到兼容各个浏览器的目的，我们可以增加一个Event Wrapper, 它对各个浏览器应当提供一致的事件操作接口。")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" eventUtils"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加句柄")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("addHandler")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addEventListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attachEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除句柄")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("removeHandler")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("removeEventListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detachEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("detachEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'on'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取事件对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//IE模型中event是一个全局唯一的对象绑定在window对象上")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getEvent")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取类型")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getType")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getElement")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("srcElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//阻止默认事件")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("preventDefault")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("preventDefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("preventDefault")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("returnValue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//阻止冒泡")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("stopPropagation")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stopPropagation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopPropagation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cancelBubble"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_10-8-事件代理"}},[t._v("10.8 事件代理")]),t._v(" "),n("p",[t._v("事件在冒泡过程中会上传到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件，这种方式称为事件代理(Event delegation)。")]),t._v(" "),n("p",[t._v("我们有一个div元素，它包含三个按钮:")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("我们可以在父节点上一次性的为所有子节点注册监听函数:")]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" box "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'box'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLowerCase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// some code")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"_10-9-自定义事件"}},[t._v("10.9 自定义事件")]),t._v(" "),n("blockquote",[n("p",[t._v("JS中已经内置了很多事件，如click, mouseover等等，但是内置事件毕竟有限，有时候我们想自己定义一些事件，例如三连击，threeclick。如何实现自定义事件呢？")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" event "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'threeclick'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bubbles"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cancelable"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntarget"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'threeclick'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("最后我们要在合适的时机触发该事件，我们可以使用dispatchEvent函数。该方法在当前节点触发指定事件，从而触发监听函数执行。该方法返回一个布尔值，只要有一个监听函数调用了Event.preventDefault(), 则返回false, 否则返回true。")])]),t._v(" "),n("p",[n("code",[t._v("target.dispatchEvent(event);")])]),t._v(" "),n("h3",{attrs:{id:"_10-10-jquery-event模型"}},[t._v("10.10 JQuery Event模型")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTICE")]),t._v(" "),n("p",[t._v("JQuery解决的一个主要问题就是浏览器的兼容问题，它有自己的事件模型实现方式。它主要有以下特性:")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("重定义了JQuery.Event对象, 统一了事件属性和方法, 统一了事件模型")])]),t._v(" "),n("li",[n("p",[t._v("可以在一个事件类型上添加多个事件处理函数, 可以一次添加多个事件类型的事件处理函数")])]),t._v(" "),n("li",[n("p",[t._v("支持自定义事件(事件命名空间)")])]),t._v(" "),n("li",[n("p",[t._v("提供了toggle, hover组合事件")])]),t._v(" "),n("li",[n("p",[t._v("提供了one, live-die, delegate-undelegate")])]),t._v(" "),n("li",[n("p",[t._v("提供了统一的事件封装, 绑定, 执行, 销毁机制")])])]),t._v(" "),n("p",[n("code",[t._v("$(document).ready();")])]),t._v(" "),n("p",[t._v("....")])])}),[],!1,null,null,null);s.default=e.exports}}]);